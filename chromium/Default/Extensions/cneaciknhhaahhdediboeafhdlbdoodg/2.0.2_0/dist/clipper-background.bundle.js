!function(e){var n={};function t(r){if(n[r])return n[r].exports;var a=n[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,t),a.l=!0,a.exports}t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var a in e)t.d(r,a,function(n){return e[n]}.bind(null,a));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=31)}({0:function(e,n,t){"use strict";t.d(n,"e",(function(){return r})),t.d(n,"f",(function(){return a})),t.d(n,"g",(function(){return o})),t.d(n,"b",(function(){return i})),t.d(n,"a",(function(){return c})),t.d(n,"h",(function(){return u})),t.d(n,"c",(function(){return s})),t.d(n,"d",(function(){return f})),t.d(n,"i",(function(){return d}));chrome.extension,chrome.storage;var r=chrome.storage.local,a=chrome.runtime,o=chrome.tabs,i=chrome.browserAction,c=chrome.cookies,u=chrome.webNavigation,s=chrome.contextMenus,f=chrome.i18n,d=chrome.windows;chrome.webRequest},1:function(e,n,t){"use strict";t.d(n,"a",(function(){return u}));var r=t(7),a=t(2);function o(e,n,t,r,a,o,i){try{var c=e[o](i),u=c.value}catch(e){return void t(e)}c.done?n(u):Promise.resolve(u).then(r,a)}function i(e){return function(){var n=this,t=arguments;return new Promise((function(r,a){var i=e.apply(n,t);function c(e){o(i,r,a,c,u,"next",e)}function u(e){o(i,r,a,c,u,"throw",e)}c(void 0)}))}}function c(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e);var n=r.a.getDomain();this.urlPrefix="".concat(n,"/api/v1/"),this.accountPrefix="".concat(r.a.getAccountDomain(),"/"),this.noPrepend=!1,this.responseType=void 0}var n,t,o;return n=e,(t=[{key:"setNoPrepend",value:function(e){return this.noPrepend=e,this}},{key:"setResponseType",value:function(e){return this.responseType=e,this}},{key:"ajaxWithoutData",value:function(e,n,t,r){var o=this;return new Promise(function(){var c=i(regeneratorRuntime.mark((function i(c,u){var s,f;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return(s=new XMLHttpRequest).onload=function(){r||"blob"===this.responseType?c(this.response):c(this.responseText)},s.onerror=function(e){u(e)},s.open(e,o.prependUrl(n,t,r)),i.next=6,Object(a.c)("znbcsr");case 6:if(f=i.sent){i.next=10;break}return u(),i.abrupt("return");case 10:r&&(s.responseType="blob",s.setRequestHeader("processData",!1),s.setRequestHeader("contentType",!1)),o.responseType&&(s.responseType=o.responseType),s.setRequestHeader("X-ZCSRF-TOKEN","znbrcsr="+f.znbcsr),s.send();case 14:case"end":return i.stop()}}),i)})));return function(e,n){return c.apply(this,arguments)}}())}},{key:"ajaxWithData",value:function(e,n,t){var r=this;return new Promise(function(){var o=i(regeneratorRuntime.mark((function o(i,c){var u,s;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return(u=new XMLHttpRequest).onload=function(e){i(this.responseText)},u.onerror=function(e){c(e)},u.open(e,r.prependUrl(n)),o.next=6,Object(a.c)("znbcsr");case 6:if(s=o.sent){o.next=10;break}return c(),o.abrupt("return");case 10:u.setRequestHeader("X-ZCSRF-TOKEN","znbrcsr="+s.znbcsr),u.send(t);case 12:case"end":return o.stop()}}),o)})));return function(e,n){return o.apply(this,arguments)}}())}},{key:"prependUrl",value:function(e,n,t){return t||this.noPrepend?e:n?"".concat(this.accountPrefix).concat(e):"".concat(this.urlPrefix).concat(e)}}])&&c(n.prototype,t),o&&c(n,o),e}()},2:function(e,n,t){"use strict";t.d(n,"b",(function(){return a})),t.d(n,"c",(function(){return o})),t.d(n,"g",(function(){return i})),t.d(n,"d",(function(){return c})),t.d(n,"a",(function(){return u})),t.d(n,"e",(function(){return s})),t.d(n,"f",(function(){return f}));var r=t(0);function a(e){return new Promise((function(n,t){try{r.a.get(e,(function(e){n(e)}))}catch(e){n(void 0)}}))}function o(e){return new Promise((function(n,t){try{r.e.get(e,(function(e){n(e)}))}catch(e){n(void 0)}}))}function i(e){return new Promise((function(n,t){try{r.e.set(e,(function(){n(!0)}))}catch(e){n(!1)}}))}function c(e){return new Promise((function(n,t){try{r.e.remove(e,(function(){n(!0)}))}catch(e){n(!1)}}))}function u(e){return new Promise((function(n,t){try{r.i.create(e,(function(e){n(e)}))}catch(e){n(void 0)}}))}function s(e){return new Promise((function(n,t){try{r.f.sendMessage(e,(function(e){n(e)}))}catch(e){n(void 0)}}))}function f(e,n){return new Promise((function(t,a){try{r.g.sendMessage(e,n,(function(e){t(e)}))}catch(e){t(void 0)}}))}},3:function(e,n,t){"use strict";t.d(n,"a",(function(){return r}));var r={SEND_ANALYTICS:1e3,SIGN_IN:1001,USER_WINDOW:1002,DOWNLOAD_BOOK_LIST:1003,INIT_WINDOW:1004,GET_TAB_ID:1005,GET_DOCUMENT:1006,INIT_READER_VIEW:1007,DISPLAY_READER_FRAME:1008,GET_STATUS:1009,CREATE_TAG:1010,SEARCH_TAG:1011,SEND_FEEDBACK:1012,SIGN_OUT:1013,GET_ALL_TAGS:1014,SEARCH_TAG_FROM_LIST:1015,FETCH_ANNOUNCEMENT:1016,SHOW_MEETING_NOTE:1017,SAVE_MEETING_NOTE:1018,SHOW_RECIPE_POPUP:1019,CLOSE_RECIPE_POPUP:1020,SHOW_PDF_POPUP:1021,RESET_TOOLBAR_ICON:1022,SHOW_TOAST:1023,HIDE_TOAST:1024,GET_LOGIN_STATUS:1025,APP_LOADING:1026,PARTIAL_CAPTURE:1027,GET_USER_IMAGE:1028,PART_PAGE_SCREENSHOT:1029,FOCUSED_PAGE_SCREENSHOT:1030,GET_NB_DOMAIN:1031,PARTIAL_ANNOTATION_FUNC:1032,TAKE_SCREENSHOT:1033,GET_CURRENT_TAB:1034,SAVE_POSITION:1035,FETCH_NOTEBOOK_IMAGE:1036,FLUSH_CACHED_CARD:1037,FULL_PAGE_SCREENSHOT:1038,OPEN_ANNOTATOR:1039,SHOW_LOADING_IFRAME:1040,HIDE_LOADING_IFRAME:1041,DOWNLOAD_FROM_URL:1042}},31:function(e,n,t){"use strict";t.r(n),t.d(n,"injectJSFile",(function(){return G}));var r=t(0),a=t(3),o=t(7),i=t(5),c=t(2);function u(e,n,t,r,a,o,i){try{var c=e[o](i),u=c.value}catch(e){return void t(e)}c.done?n(u):Promise.resolve(u).then(r,a)}function s(e){return function(){var n=this,t=arguments;return new Promise((function(r,a){var o=e.apply(n,t);function i(e){u(o,r,a,i,c,"next",e)}function c(e){u(o,r,a,i,c,"throw",e)}i(void 0)}))}}function f(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var d=function(){function e(n){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.currentTab=n}var n,t,a;return n=e,(t=[{key:"signIn",value:function(e){var n=e.TLD;return new Promise(function(){var e=s(regeneratorRuntime.mark((function e(t,a){var i,u,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=o.a.getAccountsSetup(),u={url:"".concat(i).concat(n,"/signin?servicename=notebook&signupurl=https://www.zoho.com/notebook/signup.html&appname=").concat(encodeURIComponent("Notebook-chromeExtn"),"&serviceurl=/da.do"),type:"popup",width:600,height:800,left:550,top:100},e.next=5,Object(c.a)(u);case 5:s=e.sent,window.addEventListener("znbcsrChanged",(function(e){r.i.remove(s.id,(function(){t(!0)}))}));case 7:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}())}},{key:"signUp",value:function(e){var n=e.TLD;return new Promise(function(){var e=s(regeneratorRuntime.mark((function e(t,a){var i,u,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=o.a.getSetup(),u={url:"".concat(i).concat(n,"/signup.do?appname=").concat(encodeURIComponent("Notebook-chromeExtn")),type:"popup",width:600,height:800,left:550,top:100},e.next=5,Object(c.a)(u);case 5:s=e.sent,window.addEventListener("znbcsrChanged",(function(e){r.i.remove(s.id,(function(){t(!0)}))}));case 7:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}())}}])&&f(n.prototype,t),a&&f(n,a),e}(),p=t(1);function l(e,n,t,r,a,o,i){try{var c=e[o](i),u=c.value}catch(e){return void t(e)}c.done?n(u):Promise.resolve(u).then(r,a)}function m(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var v=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.zuid=void 0}var n,t,r,a,o;return n=e,(t=[{key:"getBaseAnalyticsObject",value:function(){var e=Object(i.j)();return{appType:e.appName,deviceName:e.deviceName,browser:e.platformName,browserVersion:e.platformVersion,time:Object(i.e)()}}},{key:"send",value:(a=regeneratorRuntime.mark((function e(n){var t,r,a,o,i,u,s,f,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.category,r=n.action,a=n.label,e.next=3,Object(c.c)("userprofile");case 3:o=e.sent,i={},u=void 0,o&&(i=o.userprofile)&&(u=i.zuid),(s=this.getBaseAnalyticsObject()).zuidHash=u,s.hitType="event",s.category=t,s.action=r,s.label=a,f=new FormData,d=[s],f.append("JSONString",JSON.stringify(d)),new p.a,(new p.a).ajaxWithData("POST","internal/analytics",f);case 18:case"end":return e.stop()}}),e,this)})),o=function(){var e=this,n=arguments;return new Promise((function(t,r){var o=a.apply(e,n);function i(e){l(o,t,r,i,c,"next",e)}function c(e){l(o,t,r,i,c,"throw",e)}i(void 0)}))},function(e){return o.apply(this,arguments)})}])&&m(n.prototype,t),r&&m(n,r),e}(),h=t(9);function g(e,n,t,r,a,o,i){try{var c=e[o](i),u=c.value}catch(e){return void t(e)}c.done?n(u):Promise.resolve(u).then(r,a)}function b(e){return function(){var n=this,t=arguments;return new Promise((function(r,a){var o=e.apply(n,t);function i(e){g(o,r,a,i,c,"next",e)}function c(e){g(o,r,a,i,c,"throw",e)}i(void 0)}))}}function w(){function e(){return(e=b(regeneratorRuntime.mark((function e(n,t){var o,i,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={},i=n.menuItemId,o="bookmark"===i?{contextMenu:{contextLinkCard:!0}}:"snapshot"===i?{contextMenu:{contextScreenshot:!0}}:"simplified_article"===i?{contextMenu:{contextReaderView:!0}}:"text_selection"===i?{contextMenu:{contextTextSelection:!0,selectionText:n.selectionText}}:{},e.next=5,Object(c.c)([t.url]);case 5:(u=e.sent)&&u[t.url]&&(o.clipper_position=u[t.url].clipper_position),r.g.sendMessage(t.id,{action:a.a.INIT_WINDOW,data:{functionName:"initWindow",arguments:o}});case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}r.c.create({id:"text_selection",title:r.d.getMessage("ClipSelectedText"),contexts:["selection"]}),r.c.create({id:"simplified_article",title:r.d.getMessage("SimplifiedArticle"),contexts:["all"]}),r.c.create({id:"snapshot",title:r.d.getMessage("SnapshotThisPage"),contexts:["all"]}),r.c.create({id:"bookmark",title:r.d.getMessage("SavePageLink"),contexts:["all"]}),r.c.onClicked.addListener((function(n,t){return e.apply(this,arguments)}))}function x(e,n,t,r,a,o,i){try{var c=e[o](i),u=c.value}catch(e){return void t(e)}c.done?n(u):Promise.resolve(u).then(r,a)}function O(e){return function(){var n=this,t=arguments;return new Promise((function(r,a){var o=e.apply(n,t);function i(e){x(o,r,a,i,c,"next",e)}function c(e){x(o,r,a,i,c,"throw",e)}i(void 0)}))}}function _(e){if(e){var n=e.url;if(n)for(var t=["meet.google.[a-z]*/[a-z0-9]*-[a-z0-9]*-[a-z0-9]*","meeting.zoho.[a-z]*/meeting/presenter.do","meeting.zoho.[a-z]*/meeting/participant.do","meeting.zoho.com.cn/meeting/presenter.do","meeting.zoho.com.cn/meeting/participant.do","meetinglab.zoho.[a-z]*/meeting/presenter.do","meetinglab.zoho.[a-z]*/meeting/participant.do","zoom.[a-z]*/wc/[0-9]*/join","zoom.[a-z]*/wc/[0-9]*/start","[a-z]*.zohoshowtime.[a-z]*/sessions/[a-z0-9]*#/[0-9]*/[0-9]*/talk","[a-z]*.zohoshowtime.[a-z]*/sessions/[a-z0-9]*#/[0-9]*/[0-9]*/talk/talkresource/[0-9]*/video","[a-z]*.zohoshowtime.[a-z]*/#/portal/[a-z0-9]*/session/[0-9]*/talk/[0-9]*/broadcast/launch","[a-z]*.zohoshowtime.[a-z]*/#/portal/[a-z0-9]*/session/[0-9]*/talk/[0-9]*/f2f/resource/[0-9]*","showtime.zoho.[a-z]*/#/portal/[a-z0-9]*/session/[0-9]*/talk/[0-9]*/broadcast/launch","showtime.zoho.[a-z]*/#/portal/[a-z0-9]*/session/[0-9]*/talk/[0-9]*/f2f/resource/[0-9]*","[a-z]*.zohoshowtime.com.cn/sessions/[a-z0-9]*#/[0-9]*/[0-9]*/talk","[a-z]*.zohoshowtime.com.cn/sessions/[a-z0-9]#/[0-9]*/[0-9]*/talk/talkresource/[0-9]*/video","[a-z]*.zohoshowtime.com.cn/#/portal/[a-z0-9]*/session/[0-9]*/talk/[0-9]*/broadcast/launch","[a-z]*.zohoshowtime.com.cn/#/portal/[a-z0-9]*/session/[0-9]*/talk/[0-9]*/f2f/resource/[0-9]*","showtime.zoho.com.cn/#/portal/[a-z0-9]*/session/[0-9]*/talk/[0-9]*/broadcast/launch","showtime.zoho.com.cn/#/portal/[a-z0-9]*/session/[0-9]*/talk/[0-9]*/f2f/resource/[0-9]*","meetingsapac17.webex.[a-z]*/webappng/sites/meetingsapac17/meeting/download/[0-9]*","gotomeeting.[a-z]*/\\?meetingId=[a-z0-9]*","gotomeeting.[a-z]*/\\?meetingId=[0-9]*","bluejeans.[a-z]*/[a-z0-9]*/webrtc","bluejeans.[a-z]*/[0-9]*/webrtc","hangouts.google.com/call"],o=0;o<t.length;o++){if(new RegExp(t[o],"g").test(n))return void i(n,e.id)}}function i(e,n){return u.apply(this,arguments)}function u(){return(u=O(regeneratorRuntime.mark((function e(n,t){var o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(c.c)("meetingNote");case 2:(o=e.sent)&&o.meetingNote&&(i=-1!==n.indexOf("showtime")?"ZOHO_SHOWTIME":-1!==n.indexOf("meeting")&&-1!==n.indexOf("zoho")?"ZOHO_MEETING":-1!==n.indexOf("webex")?"CISCO":-1!==n.indexOf("zoom")?"ZOOM":-1!==n.indexOf("gotomeeting")?"GOTO_MEETING":-1!==n.indexOf("bluejeans")?"BLUE_JEAN":-1!==n.indexOf("hangouts")?"HANGOUTS":-1!==n.indexOf("meet.google")?"GOOGLE_MEET":"",r.g.sendMessage(t,{action:a.a.SHOW_MEETING_NOTE,data:{webapp:i}}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}var k=["www.allrecipes.com/recipe/","recipeland.com/recipe/v/","www.epicurious.com/recipes/food/views/","www.geniuskitchen.com/recipe/","www.today.com/recipes/","www.foodnetwork.com/recipes/","www.cdkitchen.com/recipes/recs/","www.foodgeeks.com/recipes/","www.hungrymonster.com/recipe/recipe-search.php?C=","cooking.nytimes.com/recipes/","www.myrecipes.com/recipe/","www.eatingwell.com/recipe/","www.simplyrecipes.com/recipes/","www.cookinglight.com/recipes/","www.bettycrocker.com/recipes/","kitchenstories.io/en/recipes/","kitchenstories.io/en/recipes/","www.seriouseats.com/recipes/","www.kitchenstories.com/en/recipes/","www.mensjournal.com/food-drink/","www.momskitchenhandbook.com/recipes","www.onceuponachef.com/recipes/","www.tasteofhome.com/recipes/","www.thekitchn.com/","www.thespruceeats.com","www.sweetestkitchen.com/","www.deliaonline.com/recipes"];function y(e,n){for(var t=n.split("//")[1],o=0;o<k.length;o++)if(t.startsWith(k[o])){r.g.sendMessage(e,{action:a.a.SHOW_RECIPE_POPUP});break}}function T(e,n,t,r,a,o,i){try{var c=e[o](i),u=c.value}catch(e){return void t(e)}c.done?n(u):Promise.resolve(u).then(r,a)}function S(e){return function(){var n=this,t=arguments;return new Promise((function(r,a){var o=e.apply(n,t);function i(e){T(o,r,a,i,c,"next",e)}function c(e){T(o,r,a,i,c,"throw",e)}i(void 0)}))}}function E(e){return R.apply(this,arguments)}function R(){return(R=S(regeneratorRuntime.mark((function e(n){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(c.c)("showPdf");case 2:t=e.sent,t.showPdf&&r.g.sendMessage(n.id,{action:a.a.SHOW_PDF_POPUP});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var N=[];function j(e){r.b.setIcon({path:"../../assets/icons/icon@2x.png"});e.id;for(var n=0;n<N.length;n++)N[n].tab_id===e.id&&(N[n].isActive=!1)}function A(e){var n=void 0;N||(N=[]);for(var t=0;t<N.length;t++)N[t].tab_id===e.id&&(N[t].isActive?(n="../../assets/icons/icon@2x.png",N[t].isActive=!1):(n="../../assets/icons/icon-active@2x.png",N[t].isActive=!0));n||(N.push({tab_id:e.id,isActive:!0}),n="../../assets/icons/icon-active@2x.png"),r.b.setIcon({path:n})}function P(e,n,t,r,a,o,i){try{var c=e[o](i),u=c.value}catch(e){return void t(e)}c.done?n(u):Promise.resolve(u).then(r,a)}function C(e){for(var n=e.url,t=["chrome://","chrome.google.com","addons.mozilla.org","about:devtools","about:newtab","microsoftedge.microsoft.com","edge://"],r=!1,a=0;a<t.length;a++)if(-1!==n.indexOf(t[a])){r=!0;break}return!!r&&(alert("You cannot clip this page due to browser restrictions."),!0)}function D(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function z(e,n,t,r,a,o,i){try{var c=e[o](i),u=c.value}catch(e){return void t(e)}c.done?n(u):Promise.resolve(u).then(r,a)}function M(e){return function(){var n=this,t=arguments;return new Promise((function(r,a){var o=e.apply(n,t);function i(e){z(o,r,a,i,c,"next",e)}function c(e){z(o,r,a,i,c,"throw",e)}i(void 0)}))}}var L=[".com",".eu",".com.cn",".in",".com.au"];function I(){return new Promise(function(){var e=M(regeneratorRuntime.mark((function e(n,t){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(c.g)({getLoginStatusInProgress:!0});case 3:return e.next=5,new Promise(function(){var e=M(regeneratorRuntime.mark((function e(n,t){var a,u,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(c.g)({znbcsr:void 0});case 2:return e.next=4,new Promise(function(){var e=M(regeneratorRuntime.mark((function e(n,t){var r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(c.c)("lastLoginDC");case 3:if((r=e.sent)&&r.lastLoginDC){e.next=7;break}return n(!1),e.abrupt("return");case 7:return a=r.lastLoginDC,"https://notebook.zoho".concat(a,"/da.do"),e.next=11,H("GET","https://notebook.zoho.com/da.do");case 11:if(!((r=e.sent)&&(r=JSON.parse(r))&&Object(i.q)(r.code))){e.next=15;break}return n(!0),e.abrupt("return");case 15:n(!1),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),n(!1);case 21:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(n,t){return e.apply(this,arguments)}}());case 4:if(!e.sent){e.next=8;break}return n(!0),e.abrupt("return");case 8:a=0;case 9:if(!(a<L.length)){e.next=23;break}return u=L[a],o.a.setTopLevelDomain(u),e.next=14,H("GET","https://notebook.zoho".concat(u,"/da.do"));case 14:if(!((s=e.sent)&&(s=JSON.parse(s))&&Object(i.q)(s.code))){e.next=20;break}return e.next=18,Object(c.g)({lastLoginDC:u});case 18:return n(!0),e.abrupt("return");case 20:a++,e.next=9;break;case 23:r.e.set({znbcsr:void 0}),n(!1);case 25:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}());case 5:if(!e.sent){e.next=18;break}return e.next=9,Object(h.k)();case 9:if(!((a=e.sent)&&(a=JSON.parse(a))&&Object(i.q)(a.code))){e.next=14;break}Object(h.j)().then((function(e){e&&(e=JSON.parse(e))&&Object(i.q)(e.code)&&Object(c.g)({userprofile:e})})),e.next=16;break;case 14:return e.next=16,Object(i.c)();case 16:e.next=20;break;case 18:return e.next=20,Object(i.c)();case 20:return e.next=22,Object(c.g)({getLoginStatusInProgress:!1});case 22:n(!0),e.next=30;break;case 25:return e.prev=25,e.t0=e.catch(0),e.next=29,Object(c.g)({getLoginStatusInProgress:!1});case 29:n(!1);case 30:case"end":return e.stop()}}),e,null,[[0,25]])})));return function(n,t){return e.apply(this,arguments)}}())}function F(e){return new Promise(function(){var n=M(regeneratorRuntime.mark((function n(t,o){var u,s;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!C(e)){n.next=2;break}return n.abrupt("return");case 2:return u={},n.next=5,Object(c.c)([e.url]);case 5:(s=n.sent)&&s[e.url]&&(u.clipper_position=s[e.url].clipper_position),r.g.sendMessage(e.id,{action:a.a.INIT_WINDOW,data:{functionName:"initWindow",arguments:u}},(function(n){var t;Object(i.q)(n)||(t=e.id,new Promise((function(e,n){G("../../vendor/readability/Readability.js",t),G("../../vendor/jquery/jquery-3.1.0.min.js",t),G("../../vendor/zoho/annotator/fcomponents_annotator.js",t),G("../../initial-load.js",t).then((function(){e(200)}))}))).then((function(){F(e)}))})),t(!0);case 9:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())}function H(e,n){return new Promise((function(t,a){var u=new XMLHttpRequest;u.onload=M(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.responseURL==n){e.next=3;break}return t(JSON.stringify({code:400})),e.abrupt("return");case 3:return e.next=5,Object(c.b)({url:o.a.getDomain(),name:"znbcsr"});case 5:(a=e.sent)&&a.value&&r.e.set({znbcsr:a.value}),Object(i.q)(this.status)?t(JSON.stringify({code:200})):t(JSON.stringify({code:400}));case 8:case"end":return e.stop()}}),e,this)}))),u.onerror=function(){t(JSON.stringify({code:400}))},u.open(e,n),u.send()}))}M(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(),e.next=3,Object(i.c)();case 3:return e.next=5,Object(c.g)({onOpenServerHit:!1});case 5:return e.next=7,I();case 7:return e.next=9,Object(c.g)({onOpenServerHit:!1,isFirstInstall:!1});case 9:case"end":return e.stop()}}),e)})))(),r.f.onInstalled.addListener(function(){var e=M(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(c.g)({meetingNote:!0,showPdf:!0,onOpenServerHit:!1,getLoginStatusInProgress:!1,isFirstInstall:!0});case 2:"https://www.zoho.com/notebook/web-clipper.html?src=chrome-clipper-install",r.g.create({url:"https://www.zoho.com/notebook/web-clipper.html?src=chrome-clipper-install"});case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),r.b.onClicked.addListener(function(){var e=M(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:F(n),A(n),Object(h.j)().then((function(e){e&&(e=JSON.parse(e))&&Object(i.q)(e.code)&&Object(c.g)({userprofile:e})}));case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),r.g.onCreated.addListener(function(){var e=M(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:j(n);case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),r.f.onMessage.addListener((function(e,n,t){var u=e.action,s=n.tab.id;switch(u){case a.a.SAVE_POSITION:var f={};return f[n.tab.url]={clipper_position:e.data},Object(c.g)(f),!1;case a.a.GET_CURRENT_TAB:return t(n.tab),!0;case a.a.TAKE_SCREENSHOT:return r.g.captureVisibleTab(null,(function(e){t(e)})),!0;case a.a.GET_NB_DOMAIN:return t(o.a.getDomain()),!0;case a.a.PARTIAL_CAPTURE:var p=e.data;if(!p)return void r.g.sendMessage(s,{action:a.a.PARTIAL_ANNOTATION_FUNC,data:{functionName:"partialAnnotator",arguments:p}});r.g.captureVisibleTab(null,(function(e){p.base64=e,r.g.sendMessage(s,{action:a.a.PARTIAL_ANNOTATION_FUNC,data:{functionName:"partialAnnotator",arguments:p}})}));break;case a.a.PART_PAGE_SCREENSHOT:var l=new XMLHttpRequest;l.onload=function(){r.g.executeScript(s,{code:this.responseText}),t(!0)},l.onerror=function(){t(!1)},l.open("GET","../../vendor/zoho/annotator/partial-screen.js"),l.send();break;case a.a.FOCUSED_PAGE_SCREENSHOT:var m=new XMLHttpRequest;m.onload=function(){r.g.executeScript(s,{code:this.responseText}),t(!0)},m.onerror=function(){t(!1)},m.open("GET","../../vendor/zoho/annotator/focused-ele.js"),m.send();break;case a.a.FULL_PAGE_SCREENSHOT:!function(e,n,t){q.apply(this,arguments)}(e.step,e.canvasUri,s);break;case a.a.GET_USER_IMAGE:return Object(h.i)().then(function(){var e=M(regeneratorRuntime.mark((function e(n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(i.t)([n]);case 2:r=e.sent,t(r[0]);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),!0;case a.a.GET_LOGIN_STATUS:return I().then((function(){Object(c.g)({onOpenServerHit:!1}).then((function(){Object(c.c)("znbcsr").then((function(e){e&&e.znbcsr?t(200):t(400)}))}))})),!0;case a.a.RESET_TOOLBAR_ICON:j(n.tab);break;case a.a.SEND_ANALYTICS:(new v).send(e.data);break;case a.a.SIGN_IN:return new d(n.tab).signIn(e.data).then((function(e){t({code:200})})).catch((function(){t({code:400})})),!0;case a.a.SIGN_UP:return new d(n.tab).signUp(e.data).then((function(e){t({code:200})})).catch((function(){t({code:400})})),!0;case a.a.DOWNLOAD_BOOK_LIST:return Object(h.e)().then((function(e){t(e)})),!0;case a.a.INIT_READER_VIEW:Object(c.f)(s,{action:a.a.DISPLAY_READER_FRAME}).then((function(e){t(e)}));break;case a.a.GET_STATUS:return Object(h.k)().then((function(e){e&&(e=JSON.parse(e))&&(200==e.code||201==e.code)?t(200):t(400)})).catch((function(){t(400)})),!0;case a.a.CREATE_TAG:var g=e.data;if(g&&g.tag)return Object(h.c)(g.tag).then((function(e){t(e)})),!0;break;case a.a.SEARCH_TAG:var b=e.data;if(b&&b.tag)return Object(h.l)(b.tag).then((function(e){t(e)})),!0;break;case a.a.SEND_FEEDBACK:var w=e.data;return Object(h.n)(w).then((function(e){Object(c.f)(s,{action:a.a.HIDE_TOAST,message:"Feedback sent successfully"}),t(e)})),!0;case a.a.SIGN_OUT:return Object(h.q)().then((function(){t(!0)})),!0;case a.a.GET_ALL_TAGS:return Object(h.g)().then((function(e){t(e)})),!0;case a.a.SEARCH_TAG_FROM_LIST:var x=e.data||{},O=x.tags||[],_=x.query||"";return Object(h.m)(O,_).then((function(e){t(e)})),!0;case a.a.FETCH_ANNOUNCEMENT:return Object(h.h)().then(function(){var e=M(regeneratorRuntime.mark((function e(n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n&&(n=JSON.parse(n))&&Object(i.q)(n.code)&&(r=n.announcements,Object(c.c)("notifications").then((function(e){r=Object(i.o)(r,e.notifications||[]),Object(c.g)({notifications:r});var n={announcements:r};if(!r||!r.length)return n.annoucementIcon="hide",void t(n);n.annoucementIcon="show";for(var a=0;a<r.length;a++)if(!r[a].is_read){n.showRedIcon=!0,t(n);break}t(n)})));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),!0;case a.a.FETCH_NOTEBOOK_IMAGE:return Object(h.d)(e.data.cover_id).then(function(){var e=M(regeneratorRuntime.mark((function e(n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(i.t)([n]);case 2:r=e.sent,t(r[0]);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),!0;case a.a.FLUSH_CACHED_CARD:return U.flushData(s),!0;case a.a.DOWNLOAD_FROM_URL:return Object(h.f)(e.data.url).then(function(){var e=M(regeneratorRuntime.mark((function e(n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(i.t)([n]);case 2:r=e.sent,t(r[0]);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),!0}})),r.h.onCompleted.addListener(function(){var e=M(regeneratorRuntime.mark((function e(n){var t,a,u,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!1,t=n.url,a=".com",-1===t.indexOf(".eu/da.do")){e.next=7;break}a=".eu",e.next=64;break;case 7:if(-1===t.indexOf(".com.cn/da.do")){e.next=11;break}a=".com.cn",e.next=64;break;case 11:if(-1===t.indexOf(".com.au/da.do")){e.next=15;break}a=".com.au",e.next=64;break;case 15:if(-1===t.indexOf(".com/da.do")){e.next=19;break}a=".com",e.next=64;break;case 19:if(-1===t.indexOf(".in/da.do")){e.next=23;break}a=".in",e.next=64;break;case 23:if(-1===t.indexOf(".eu/app/index.html")){e.next=27;break}a=".eu",e.next=64;break;case 27:if(-1===t.indexOf(".com.cn/app/index.html")){e.next=31;break}a=".com.cn",e.next=64;break;case 31:if(-1===t.indexOf(".com.au/app/index.html")){e.next=35;break}a=".com.au",e.next=64;break;case 35:if(-1===t.indexOf(".com/app/index.html")){e.next=39;break}a=".com",e.next=64;break;case 39:if(-1===t.indexOf(".in/app/index.html")){e.next=43;break}a=".in",e.next=64;break;case 43:if(-1===t.indexOf(o.a.getAccountDomain()+"/logout")){e.next=55;break}return e.next=46,Object(c.c)(["showPdf","meetingNote","analyticsShown"]);case 46:return u=e.sent,r.e.clear(),e.next=50,Object(c.g)(u);case 50:return e.next=52,Object(c.g)({onOpenServerHit:!0});case 52:return e.abrupt("return");case 55:if(-1===t.indexOf(o.a.getAccountDomain()+"/signin")){e.next=63;break}return e.next=58,Object(i.c)();case 58:return e.next=60,Object(c.g)({onOpenServerHit:!0});case 60:case 63:return e.abrupt("return");case 64:return o.a.setTopLevelDomain(a),e.next=67,Object(c.b)({url:o.a.getDomain(),name:"znbcsr"});case 67:(s=e.sent)&&s.value&&r.e.set({znbcsr:s.value},(function(){var e={detail:{newZnbcsr:s.value}};window.dispatchEvent(new CustomEvent("znbcsrChanged",e)),Object(h.j)().then((function(e){e&&(e=JSON.parse(e))&&Object(i.q)(e.code)&&Object(c.g)({userprofile:e})}))}));case 69:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),r.f.onConnect.addListener((function(e){U.addState(parseInt(e.name)),e.onMessage.addListener((function(n){U.stateChanged(n,e)}))}));var U=new(function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.states=[]}var n,t,r,o;return n=e,(t=[{key:"addState",value:function(e){this.states.push({tab_id:e,unsaved_textcard:{type:"note/mixed"},unsaved_bookmark:{type:"note/bookmark"},unsaved_imagecard:{type:"note/image"},unsaved_filecard:{type:"note/file"}})}},{key:"stateChanged",value:function(e,n){if(e){var t=e.tab_id;if(t){var r=this.getTabState(t);if(r||(addState(t),r=this.getTabState(t)),e.reset)this.resetState(r);else{if(e.unsaved_textcard){var a=e.unsaved_textcard;a.title&&(r.unsaved_textcard.title=a.title),a.notebook_id&&(r.unsaved_textcard.notebook_id=a.notebook_id),a.content&&(r.unsaved_textcard.content=a.content),a.image&&(r.unsaved_textcard.image=a.image||[]),a.color&&(r.unsaved_textcard.color=a.color),a.reminder_time&&(r.unsaved_textcard.reminder_time=a.reminder_time),a.tags&&(r.unsaved_textcard.tags=a.tags),a.isBrowserClose&&(r.unsaved_textcard.isBrowserClose=a.isBrowserClose)}if(e.unsaved_bookmark){var o=e.unsaved_bookmark;o.title&&(r.unsaved_bookmark.title=o.title),"__clear__"===o.title&&(r.unsaved_bookmark.title=void 0),o.notebook_id&&(r.unsaved_bookmark.notebook_id=o.notebook_id),o.reminder_time&&(r.unsaved_bookmark.reminder_time=o.reminder_time),o.content&&(r.unsaved_bookmark.content=o.content),"__clear__"===o.content&&(r.unsaved_bookmark.content=void 0),o.tags&&(r.unsaved_bookmark.tags=o.tags)}if(e.unsaved_imagecard){var i=e.unsaved_imagecard;i.title&&(r.unsaved_imagecard.title=i.title),i.notebook_id&&(r.unsaved_imagecard.notebook_id=i.notebook_id),i.reminder_time&&(r.unsaved_imagecard.reminder_time=i.reminder_time),i.content&&(r.unsaved_imagecard.content=i.content),i.image&&(r.unsaved_imagecard.image=i.image||[]),i.tags&&(r.unsaved_imagecard.tags=i.tags)}if(e.unsaved_filecard){var c=e.unsaved_filecard;c.title&&(r.unsaved_filecard.title=c.title),c.notebook_id&&(r.unsaved_filecard.notebook_id=c.notebook_id),c.reminder_time&&(r.unsaved_filecard.reminder_time=c.reminder_time),c.content&&(r.unsaved_filecard.content=c.content),c.fileUrl&&(r.unsaved_filecard.fileUrl=c.fileUrl)}e.save&&this.saveState(r,n)}}}}},{key:"imageInsertChar",value:function(e){return e=Object(i.v)(stateToSave.unsaved_textcard.content,!0),e=Object(i.x)(e)}},{key:"saveState",value:(o=M(regeneratorRuntime.mark((function e(n,t){var r,o,u=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=void 0,this.hasUnsavedImageCard(n)&&(n.unsaved_imagecard.znml=this.formZNML(n.unsaved_imagecard),r=n.unsaved_imagecard),this.hasUnsavedTextCard(n)&&(n.unsaved_textcard.content=Object(i.w)(n.unsaved_textcard.content,"true","false"),n.unsaved_textcard.content=Object(i.v)(n.unsaved_textcard.content,!0),n.unsaved_textcard.content=Object(i.x)(n.unsaved_textcard.content),n.unsaved_textcard.znml=this.formZNML(n.unsaved_textcard),r=n.unsaved_textcard),this.hasUnsavedBookmarkCard(n)&&(n.unsaved_bookmark.znml=this.formZNML(n.unsaved_bookmark),r=n.unsaved_bookmark),this.hasUnsavedFileCard(n)&&(n.unsaved_filecard.znml=this.formZNML(n.unsaved_filecard),r=n.unsaved_filecard),r){e.next=7;break}return e.abrupt("return");case 7:if(Object(c.f)(n.tab_id,{action:a.a.SHOW_TOAST,message:"Adding Note..."}),!r.isBrowserClose){e.next=17;break}return e.next=11,I();case 11:return e.next=13,Object(c.c)("znbcsr");case 13:if((o=e.sent)&&o.znbcsr){e.next=17;break}return s=r.title,f=r.content,function(e,n){var t=URL.createObjectURL(e),r=document.createElement("div"),a=document.createElement("a");document.body.appendChild(r),r.appendChild(a),a.innerHTML="&nbsp;",r.style.width="0",r.style.height="0",a.href=t,a.download=n;var o=new MouseEvent("click",{});a.dispatchEvent(o),document.body.removeChild(r)}(new Blob([f],{type:"text/plain"}),s+".txt"),e.abrupt("return");case 17:this.clearUnSavedCard(n,r.type),Object(h.a)(r).then(function(){var e=M(regeneratorRuntime.mark((function e(o){var s,f,d,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o&&(o=JSON.parse(o)),!r.image||!r.image.length){e.next=16;break}s=r.image,f=[],d=0;case 5:if(!(d<s.length)){e.next=13;break}return e.next=8,Object(h.b)(o.notebook_id,o.notecard_id,s[d],o.name);case 8:(p=e.sent)&&(p=JSON.parse(p))&&Object(i.q)(p.code)&&f.push(p);case 10:d++,e.next=5;break;case 13:return r.znml=u.addImageTagInZNML(s,f,r.znml,r.type),e.next=16,Object(h.r)(o.notebook_id,o.notecard_id,r.znml);case 16:if(!r.reminder_time){e.next=19;break}return e.next=19,Object(h.o)(o.notebook_id,o.notecard_id,r.reminder_time);case 19:if(!r.tags||!r.tags.length){e.next=22;break}return e.next=22,Object(h.p)(o.notebook_id,o.notecard_id,r.tags);case 22:try{t.postMessage({action:"cardCreated",code:200})}catch(e){}Object(c.f)(n.tab_id,{action:a.a.HIDE_TOAST,message:"Note Added",notecard_id:o.notecard_id});case 24:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}());case 19:case"end":return e.stop()}var s,f}),e,this)}))),function(e,n){return o.apply(this,arguments)})},{key:"addImageTagInZNML",value:function(e,n,t,r){if(!n||!n.length)return t;if("note/mixed"===r){for(var a=0;a<n.length;a++){var o="<zimage type=".concat(n[a].format," resource-id=").concat(n[a].resource_id,"></zimage><br>");t=t.replace("-()-",o)}return t}for(var i="",c=0;c<n.length;c++)i+="<zimage type=".concat(n[c].format," resource-id=").concat(n[c].resource_id,"></zimage><br>");if(i){var u=t.indexOf("</div></content>");return[t.slice(0,u),i,t.slice(u)].join("")}return t}},{key:"clearUnSavedCard",value:function(e,n){switch(n){case"note/mixed":e.unsaved_textcard={type:"note/mixed"};break;case"note/bookmark":e.unsaved_bookmark={type:"note/bookmark"};break;case"note/image":e.unsaved_imagecard={type:"note/image"}}}},{key:"removeTab",value:function(e){}},{key:"resetState",value:function(e){e.unsaved_textcard={type:"note/mixed"},e.unsaved_bookmark={type:"note/bookmark"},e.unsaved_imagecard={type:"note/image"},e.unsaved_filecard={type:"note/file"}}},{key:"getTabState",value:function(e){for(var n=this.states,t=0;t<n.length;t++)if(n[t].tab_id===e)return n[t]}},{key:"formZNML",value:function(e){var n=Object(i.k)(),t=e.color||"#FFFFFF";t=Object(i.y)(t);var r="<div></div>";e.content&&(r="<div>".concat(e.content,"</div>"));var a=e.title||"Untitled";return'<?xml version="1.0" encoding="UTF-8"?><ZNote><ZMeta><ZTitle>'.concat(a,"</ZTitle><ZCreatedDate>").concat(n,"</ZCreatedDate><ZModifiedDate>").concat(n,"</ZModifiedDate><ZLocation><ZLongitude>0</ZLongitude><ZLatitude>0</ZLatitude><ZCity>UnKnown</ZCity></ZLocation><ZNoteColor>").concat(t,"</ZNoteColor><ZNoteType>").concat(e.type,"</ZNoteType></ZMeta><ZContent><![CDATA[<content>").concat(r,"</content> ]]></ZContent></ZNote>")}},{key:"hasUnsavedImageCard",value:function(e){return!!(e&&e.unsaved_imagecard&&e.unsaved_imagecard.image&&e.unsaved_imagecard.image.length)}},{key:"hasUnsavedTextCard",value:function(e){return!!(e&&e.unsaved_textcard&&(e.unsaved_textcard.content||e.unsaved_textcard.title||e.unsaved_textcard.image&&e.unsaved_textcard.image.length))}},{key:"hasUnsavedBookmarkCard",value:function(e){return!!(e&&e.unsaved_bookmark&&e.unsaved_bookmark.content)}},{key:"hasUnsavedFileCard",value:function(e){return!!(e&&e.unsaved_filecard&&e.unsaved_filecard.fileUrl)}},{key:"flushData",value:function(e){var n=this.getTabState(e);this.resetState(n)}}])&&D(n.prototype,t),r&&D(n,r),e}());function G(e,n){return new Promise((function(t,a){var o=new XMLHttpRequest;o.onload=function(){r.g.executeScript(n,{code:this.responseText}),t(200)},o.onerror=function(){t(400)},o.open("GET",e),o.send()}))}r.g.onUpdated.addListener(function(){var e,n=(e=regeneratorRuntime.mark((function e(n,t,r){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"loading"===t.status&&j(r),"complete"===t.status&&(a=r.url,_(r),y(r.id,a),E(r));case 2:case"end":return e.stop()}}),e)})),function(){var n=this,t=arguments;return new Promise((function(r,a){var o=e.apply(n,t);function i(e){P(o,r,a,i,c,"next",e)}function c(e){P(o,r,a,i,c,"throw",e)}i(void 0)}))});return function(e,t,r){return n.apply(this,arguments)}}());var W=[];function q(){return(q=M(regeneratorRuntime.mark((function e(n,t,o){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"intialScrollPos"===n?(W=[],r.g.executeScript(o,{code:"var initialScroll = 0"},M(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G("../../vendor/zoho/annotator/nb-fullpage.js",o);case 2:case"end":return e.stop()}}),e)}))))):"scrollAndCapture"===n?setTimeout((function(){r.g.captureVisibleTab(null,(function(e){if(void 0===e)return 0;W.push(e),r.g.executeScript(o,{code:"var initialScroll = 1"},M(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G("../../vendor/zoho/annotator/nb-fullpage.js",o);case 2:case"end":return e.stop()}}),e)}))))}))}),100):"mergeScreenshots"===n?(J(o),r.g.executeScript(o,{code:"var initialScroll ="+JSON.stringify(W)},M(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G("../../vendor/zoho/annotator/nb-fullpage.js",o);case 2:case"end":return e.stop()}}),e)}))))):"captureDone"===n?(setTimeout((function(){Z(o)}),100),r.g.sendMessage(o,{action:a.a.OPEN_ANNOTATOR,data:{functionName:"openAnnotator",arguments:{base64:t}}})):"noscrollCapture"===n&&(Z(o),r.g.captureVisibleTab(null,(function(e){r.g.sendMessage(o,{action:a.a.OPEN_ANNOTATOR,data:{functionName:"openAnnotator",arguments:{base64:e}}})})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(e){r.g.sendMessage(e,{action:a.a.SHOW_LOADING_IFRAME})}function Z(e){r.g.sendMessage(e,{action:a.a.HIDE_LOADING_IFRAME})}},4:function(e,n,t){"use strict";function r(e,n){return function(e,n){var t=e.getDate(),r=e.getMonth(),o=r+1,i=e.getFullYear(),c=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][r],u=e.getHours(),s=e.getMinutes(),f=e.getSeconds(),d="AM";u>=12&&(d="PM");u>12&&(u-=12);switch(n){case"dd-MMM, yyyy":return a(t)+"-"+c+", "+i;case"YYYY-MM-DDTHH:mm:SS+0530":return i+"-"+a(o)+"-"+a(t)+"T"+a(u)+":"+a(s)+":"+a(f)+"+0530";case"YYYY-MM-DDTHH:mm:SS+0000":return i+"-"+a(o)+"-"+a(t)+"T"+a(u)+":"+a(s)+":"+a(f)+"+0000";case"dd/MM/YYYY":return a(t)+"/"+a(o)+"/"+i;case"HH:mm:SS":return a(u)+":"+a(s)+":"+a(f);case"HH:mm M, MMM dd, yyyy":return a(u)+":"+a(s)+" "+d+", "+c+" "+a(t)+", "+i;default:return t+" "+c+" "+i}}(new Date(e),n)}function a(e){return e<10?"0"+e:""+e}t.d(n,"a",(function(){return r})),t.d(n,"b",(function(){return a}))},5:function(e,n,t){"use strict";t.d(n,"j",(function(){return f})),t.d(n,"e",(function(){return d})),t.d(n,"p",(function(){return p})),t.d(n,"u",(function(){return l})),t.d(n,"t",(function(){return m})),t.d(n,"l",(function(){return v})),t.d(n,"r",(function(){return h})),t.d(n,"q",(function(){return g})),t.d(n,"g",(function(){return b})),t.d(n,"s",(function(){return w})),t.d(n,"k",(function(){return x})),t.d(n,"m",(function(){return O})),t.d(n,"y",(function(){return _})),t.d(n,"f",(function(){return k})),t.d(n,"o",(function(){return y})),t.d(n,"w",(function(){return T})),t.d(n,"c",(function(){return S})),t.d(n,"h",(function(){return E})),t.d(n,"v",(function(){return R})),t.d(n,"x",(function(){return N})),t.d(n,"z",(function(){return j})),t.d(n,"a",(function(){return A})),t.d(n,"i",(function(){return P})),t.d(n,"d",(function(){return C})),t.d(n,"b",(function(){return D})),t.d(n,"n",(function(){return z}));var r=t(2),a=t(3),o=t(0),i=t(4),c=t(8);t(9);function u(e,n,t,r,a,o,i){try{var c=e[o](i),u=c.value}catch(e){return void t(e)}c.done?n(u):Promise.resolve(u).then(r,a)}function s(e){return function(){var n=this,t=arguments;return new Promise((function(r,a){var o=e.apply(n,t);function i(e){u(o,r,a,i,c,"next",e)}function c(e){u(o,r,a,i,c,"throw",e)}i(void 0)}))}}function f(){var e,n,t=navigator.userAgent,r=(navigator.appName,""+parseFloat(navigator.appVersion)),a=parseInt(navigator.appVersion,10);-1!=(e=t.indexOf("Chrome"))?("Chrome",r=t.substring(e+7)):t.lastIndexOf(" ")+1<(e=t.lastIndexOf("/"))&&(r=t.substring(e+1)),-1!=(n=r.indexOf(";"))&&(r=r.substring(0,n)),-1!=(n=r.indexOf(" "))&&(r=r.substring(0,n)),a=parseInt(""+r,10),isNaN(a)&&(r=""+parseFloat(navigator.appVersion),a=parseInt(navigator.appVersion,10));var i={platformVersion:r,deviceName:navigator.userAgent,deviceType:"Web"},c=o.f.getManifest().version;return i.appVersion=c,i.appName="Chrome Extension - "+c,i.platformName="Chrome",i}function d(){return(new Date).getTime()}function p(){var e=navigator.language;return"zh"===e||"zh-CN"===e||"zh-TW"===e}function l(e,n){document.createElement(e).constructor===HTMLElement&&customElements.define(e,n)}function m(e){return new Promise((function(n,t){for(var r=[],a=0,o=0;o<e.length;o++){var i=new FileReader;i.onload=c,i.readAsDataURL(e[o])}function c(){r.push(this.result),++a===e.length&&n(r)}}))}function v(){return new Promise(function(){var e=s(regeneratorRuntime.mark((function e(n,t){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(r.c)("notebookList");case 2:(i=e.sent)&&i.length||o.f.sendMessage({action:a.a.DOWNLOAD_BOOK_LIST},(function(e){var t=[];e&&(e=JSON.parse(e))&&g(e.code)&&(t=e.notebooks),n(t)}));case 4:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}())}function h(e){return new Promise((function(n,t){if(fileMap[e])n(!0);else{var r=document.createElement("script");document.head.appendChild(r),r.onload=function(){fileMap[e]=!0,n(!0)},r.onerror=function(){t(!1)},r.src=e}}))}function g(e){return 200===e||201===e}function b(e){e&&(e.focus(),e.innerText&&w(e))}function w(e){var n,t;document.createRange?((n=document.createRange()).selectNodeContents(e),n.collapse(!1),(t=window.getSelection()).removeAllRanges(),t.addRange(n)):document.selection&&((n=document.body.createTextRange()).moveToElementText(e),n.collapse(!1),n.select())}function x(){var e,n,t,r,a=new Date;return a.getFullYear()+"-"+Object(i.b)(a.getMonth()+1)+"-"+Object(i.b)(a.getDate())+"T"+(Object(i.b)(a.getHours())+":"+Object(i.b)(a.getMinutes())+":"+Object(i.b)(a.getSeconds()))+(e=a.getTimezoneOffset()/60,n=e<0?"+":"-",t=Math.floor(Math.abs(e)),r=Math.floor(60*Math.abs(e)%60),n+Object(i.b)(t)+""+Object(i.b)(r))}function O(){return new Promise(function(){var e=s(regeneratorRuntime.mark((function e(n,t){var a,o,i,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(r.c)("userprofile");case 2:a=e.sent,o=void 0,a&&(o=a.userprofile)&&o.default_notecard_color&&"random"!==o.default_notecard_color.toLowerCase()&&n(o.default_notecard_color),c=(i=["#FFB47A","#FFEE8A","#FFC96C","#FFFFFF","#FF9575","#FF8785","#E9FF9D","#B3FFE8","#83D2FF","#CDC2FF","#F9D3FF","#D9E8F0"]).length,0,n(i[Math.floor(Math.random()*(c-0)+0)]);case 9:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}())}function _(e){if(-1!==e.indexOf("rgb")){var n=(e=e.substring(e.indexOf("(")+1,e.indexOf(")"))).split(",");return"#"+(16777216+(n[2]|n[1]<<8|n[0]<<16)).toString(16).slice(1)}return e}function k(e){for(var n=e.split(","),t=n[0].match(/:(.*?);/)[1],r=atob(n[1]),a=r.length,o=new Uint8Array(a);a--;)o[a]=r.charCodeAt(a);return new Blob([o],{type:t})}function y(e,n){for(var t=0;t<e.length;t++){var r=e[t];r.is_read=!1;for(var a=0;a<n.length;a++){var o=n[a];if(o.announcement_id===r.announcement_id){r.is_read=o.is_read;break}}}return e}function T(e,n,t){return e?(e=(e=(e=(e=e.replace(/<article/g,"<div").replace(/<\/article>/g,"</div>")).replace(/<main/g,"<div").replace(/<\/main>/g,"</div>")).replace(/<section/g,"<div").replace(/<\/section>/g,"</div>")).replace(/<br>/g,"<br/>").replace(/<hr>/g,"<hr/>"),"true"===n&&function(e){e=Object(c.a)(e)}(e),e=(e=e.replace(/[\u2028\u2029]/gim,"<br />")).replace(/[\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/gim,""),"true"===t&&(e=e.replace(/"/g,"\\'")),e):e}function S(){return new Promise(function(){var e=s(regeneratorRuntime.mark((function e(n,t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(r.d)("znbcsr");case 2:n(!0);case 3:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}())}function E(e){if(e&&e.length){for(var n=document.createDocumentFragment(),t=0;t<e.length;t++){var r=document.createElement("div");r.id=e[t].notebook_id,r.classList.add("each-book"),r.innerText=e[t].name,n.appendChild(r)}return n}}function R(e,n){for(var t=(new DOMParser).parseFromString(e,"text/html"),r=t.querySelectorAll("script"),a=0;a<r.length;a++)r[a].parentElement.removeChild(r[a]);for(var o=t.querySelectorAll("iframe"),i=0;i<o.length;i++)o[i].parentElement.removeChild(o[i]);for(var c=t.querySelectorAll("style"),u=0;u<c.length;u++)c[u].parentElement.removeChild(c[u]);for(var s=t.querySelectorAll("button"),f=0;f<s.length;f++)s[f].parentElement.removeChild(s[f]);for(var d=t.querySelectorAll("input"),p=0;p<d.length;p++)d[p].parentElement.removeChild(d[p]);for(var l=t.querySelectorAll("textarea"),m=0;m<l.length;m++)l[m].parentElement.removeChild(l[m]);for(var v=t.querySelectorAll(".clipper-space"),h=0;h<v.length;h++){var g=document.createElement("div");g.innerHTML=v[h].innerHTML,v[h].parentElement.appendChild(g),v[h].parentElement.removeChild(v[h])}if(!n){for(var b=t.querySelectorAll("image-view"),w=0;w<b.length;w++)b[w].parentElement.removeChild(b[w]);for(var x=t.querySelectorAll("p"),O=0;O<x.length;O++)x[O].innerText&&x[O].innerText.trim()||x[O].querySelector("img")||x[O].parentElement.removeChild(x[O]);for(var _=t.querySelectorAll("br"),k=0;k<_.length;k++)_[k].innerText&&_[k].innerText.trim()||_[k].querySelector("img")||_[k].parentElement.removeChild(_[k]);for(var y=t.querySelectorAll("div"),T=0;T<y.length;T++)y[T].innerText&&y[T].innerText.trim()||y[T].querySelector("img")||y[T].parentElement.removeChild(y[T])}return t.body.innerHTML}function N(e){for(var n=(new DOMParser).parseFromString(e,"text/html"),t=n.querySelectorAll("image-view"),r=0;r<t.length;r++){var a=document.createTextNode("-()-");t[r].parentElement.replaceChild(a,t[r])}return"undefined"===n.body.innerHTML?"":n.body.innerHTML}function j(e,n){return new Promise(function(){var t=s(regeneratorRuntime.mark((function t(a,o){var i,c,u,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(r.c)("analyticsShown");case 2:for(i=t.sent,u=!0,i&&i.analyticsShown?c=i.analyticsShown:(c="[]",u=!0),c=JSON.parse(c),s=0;s<c.length;s++)c[s].zuid===n&&(c[s].shown=e,u=!1);return u&&c.push({shown:e,zuid:n}),t.next=10,Object(r.g)({analyticsShown:JSON.stringify(c)});case 10:a(!0);case 11:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())}function A(e){return new Promise(function(){var n=s(regeneratorRuntime.mark((function n(t,a){var o,i,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(r.c)("analyticsShown");case 2:o=n.sent,i=o&&o.analyticsShown?o.analyticsShown:"[]",i=JSON.parse(i),c=0;case 6:if(!(c<i.length)){n.next=13;break}if(i[c].zuid!==e){n.next=10;break}return t(!1),n.abrupt("return");case 10:c++,n.next=6;break;case 13:t(!0);case 14:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())}function P(e){return new Promise(function(){var n=s(regeneratorRuntime.mark((function n(t,a){var o,i,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(r.c)("analyticsShown");case 2:o=n.sent,i=o&&o.analyticsShown?o.analyticsShown:"[]",i=JSON.parse(i),c=0;case 6:if(!(c<i.length)){n.next=13;break}if(i[c].zuid!==e){n.next=10;break}return t(i[c].shown),n.abrupt("return");case 10:c++,n.next=6;break;case 13:t(!1);case 14:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())}function C(e){return new Promise((function(n,t){var r=e.querySelectorAll("img");if(r&&r.length)for(var i=function(e){var t=r[e].src;if(!t)return"continue";o.f.sendMessage({action:a.a.DOWNLOAD_FROM_URL,data:{url:t}},(function(t){var a=document.createElement("image-view");a.setAttribute("image-data",t),a.setAttribute("dont_load_annotator",!0),a.id="image-view_"+d();var o=document.createElement("div"),i=document.createElement("div");i.innerHTML="<div class='clipper-space'><br></div>",o.appendChild(i),o.appendChild(a);var c=document.createElement("div");c.innerHTML="<div class='clipper-space'><br></div>",o.appendChild(c);var u=r[e].parentElement;u.removeChild(r[e]),u.appendChild(o),n(!0)}))},c=0;c<r.length;c++)i(c)}))}function D(e){for(var n=(new DOMParser).parseFromString(e,"text/html"),t=n.querySelectorAll("img"),r=0;r<t.length;r++)if(t[r].src&&-1===t[r].src.indexOf("http"))if(-1!==t[r].src.indexOf("moz-extension://")||-1!==t[r].src.indexOf("chrome-extension://")){var a=new URL(t[r].src);t[r].src=currentTab.url+a.pathname}else t[r].src=currentTab.url+t[r].src;return n.body.innerHTML}function z(e){if(!e||!e.trim())return"#212121";var n,t,r;if(e.match(/#/))n=function(e){return e=M(e),parseInt(e.substring(0,2),16)}(e),t=function(e){return e=M(e),parseInt(e.substring(2,4),16)}(e),r=function(e){return e=M(e),parseInt(e.substring(4,6),16)}(e);else{var a=e.substring(e.indexOf("(")+1,e.lastIndexOf(")")).split(/,\s*/);n=a[0],t=a[1],r=a[2]}return Math.round((299*parseInt(n)+587*parseInt(t)+114*parseInt(r))/1e3)>125?"#212121":"#FFFFFF"}function M(e){return"#"===e.charAt(0)?e.substring(1,7):e}},7:function(e,n,t){"use strict";function r(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}t.d(n,"a",(function(){return a}));var a=new(function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.setup="https://notebook.zoho",this.accountsSetup="https://accounts.zoho",this.topLevelDomain=".com"}var n,t,a;return n=e,(t=[{key:"setSetup",value:function(e){return this.setup=e,this}},{key:"setTopLevelDomain",value:function(e){return this.topLevelDomain=e,this}},{key:"getTopLevelDomain",value:function(){return this.topLevelDomain}},{key:"getAccountsSetup",value:function(){return this.accountsSetup}},{key:"getSetup",value:function(){return this.setup}},{key:"getDomain",value:function(){return this.setup+""+this.topLevelDomain}},{key:"getAccountDomain",value:function(){return this.accountsSetup+""+this.topLevelDomain}}])&&r(n.prototype,t),a&&r(n,a),e}())},8:function(e,n,t){"use strict";t.d(n,"a",(function(){return o}));var r={elements:["a","b","br","caption","cite","code","col","colgroup","dd","dl","dt","em","h1","h2","h3","h4","h5","h6","i","img","li","ol","p","q","small","strike","strong","sub","sup","table","tbody","td","tfoot","th","thead","tr","u","ul","div","span","figure","article","section"],attributes:{a:["href"],img:["type","height","src","width","duration","class","remotesrc","org-width","org-height","consumers","local-id"],col:["span","width"],colgroup:["span","width"],ol:["start","type"],q:["cite"],table:["summary","width"],td:["abbr","axis","colspan","rowspan","width"],th:["abbr","axis","colspan","rowspan","scope","width"],ul:["type"]},protocols:{a:{href:["http","https","mailto","tel"]},img:{src:["http","https","zresource"]}}};function a(e){for(var n=e.getElementsByTagName("style"),t=0;t<n.length;t++)n[t].parentNode.removeChild(n[t]);return e}function o(e){var n=document.createElement("div");n.innerHTML=e,n=a(n);var t=new Sanitize(r).clean_node(n),o=document.createElement("div");o.appendChild(t.cloneNode(!0));var i=o.innerHTML;return i=(i=i.replace(/[\u2028\u2029]/gim,"<br />")).replace(/[\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/gim,"")}},9:function(e,n,t){"use strict";t.d(n,"e",(function(){return s})),t.d(n,"k",(function(){return f})),t.d(n,"j",(function(){return d})),t.d(n,"a",(function(){return p})),t.d(n,"b",(function(){return l})),t.d(n,"o",(function(){return m})),t.d(n,"l",(function(){return v})),t.d(n,"c",(function(){return h})),t.d(n,"n",(function(){return g})),t.d(n,"q",(function(){return b})),t.d(n,"r",(function(){return w})),t.d(n,"p",(function(){return x})),t.d(n,"g",(function(){return O})),t.d(n,"m",(function(){return _})),t.d(n,"h",(function(){return k})),t.d(n,"i",(function(){return S})),t.d(n,"d",(function(){return E})),t.d(n,"f",(function(){return R}));var r=t(1),a=t(5),o=t(7),i=t(2);function c(e,n,t,r,a,o,i){try{var c=e[o](i),u=c.value}catch(e){return void t(e)}c.done?n(u):Promise.resolve(u).then(r,a)}function u(e){return function(){var n=this,t=arguments;return new Promise((function(r,a){var o=e.apply(n,t);function i(e){c(o,r,a,i,u,"next",e)}function u(e){c(o,r,a,i,u,"throw",e)}i(void 0)}))}}function s(){return(new r.a).ajaxWithoutData("GET","notebooks?sort_column=-Notebook.LastModifiedTime&offset=0&limit=100")}function f(){return new Promise(function(){var e=u(regeneratorRuntime.mark((function e(n,t){var a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new r.a,e.next=3,a.ajaxWithoutData("GET","userprofile/accounts/status");case 3:o=e.sent,n(o);case 5:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}())}function d(){return new Promise(function(){var e=u(regeneratorRuntime.mark((function e(n,t){var a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new r.a,e.next=3,a.ajaxWithoutData("GET","userprofile");case 3:o=e.sent,n(o);case 5:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}())}function p(e){return new Promise(function(){var n=u(regeneratorRuntime.mark((function n(t,a){var o,i,c,u,s,f;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("note/file"!==e.type){n.next=10;break}return n.next=3,y(e.fileUrl);case 3:return o=n.sent,n.next=6,T(e.notebook_id,o,"");case 6:i=n.sent,t(i),n.next=19;break;case 10:return c=new r.a,(u=new FormData).append("attachment",e.znml),s="notebooks/".concat(e.notebook_id,"/notecards"),e.notebook_id&&"undefined"!==e.notebook_id||(s="notecards"),n.next=17,c.ajaxWithData("POST",s,u);case 17:f=n.sent,t(f);case 19:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())}function l(e,n,t,o){return new Promise(function(){var i=u(regeneratorRuntime.mark((function i(c,u){var s,f,d,p,l;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return s=new r.a,f=Object(a.f)(t),(d=new FormData).append("attachment",f,o),p="notebooks/".concat(e,"/notecards/").concat(n,"/resources"),i.next=7,s.ajaxWithData("POST",p,d);case 7:l=i.sent,c(l);case 9:case"end":return i.stop()}}),i)})));return function(e,n){return i.apply(this,arguments)}}())}function m(e,n,t){return new Promise(function(){var a=u(regeneratorRuntime.mark((function a(o,i){var c,u,s,f;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return c=new r.a,(u=new FormData).append("JSONString",JSON.stringify({reminders:[{type:"reminder/time",reminder_time:t,created_time:(new Date).getTime()}]})),s="notebooks/".concat(e,"/notecards/").concat(n,"/reminders"),a.next=6,c.ajaxWithData("POST",s,u);case 6:f=a.sent,o(f);case 8:case"end":return a.stop()}}),a)})));return function(e,n){return a.apply(this,arguments)}}())}function v(e){return new Promise(function(){var n=u(regeneratorRuntime.mark((function n(t,a){var o,i,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=new r.a,i="tags/search?query=".concat(e,"&limit=5"),n.next=4,o.ajaxWithData("GET",i);case 4:c=n.sent,t(c);case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())}function h(e,n){return new Promise(function(){var t=u(regeneratorRuntime.mark((function t(a,o){var i,c,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=new r.a,"tags",(c=new FormData).append("JSONString",JSON.stringify({name:e,created_time:(new Date).getTime(),resource_id:n})),t.next=6,i.ajaxWithData("POST","tags",c);case 6:u=t.sent,a(u);case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())}function g(e){var n=e.sender,t=e.content,o=e.base64,i=e.imageName;return new Promise(function(){var e=u(regeneratorRuntime.mark((function e(c,u){var s,f,d,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=new r.a,"feedback",f=new FormData,o&&(d=Object(a.f)(o),f.append("attachment",d,i)),"Notebook - Chrome Extension Feedback",f.append("JSONString",JSON.stringify({subject:"Notebook - Chrome Extension Feedback",sender:n,content:t})),e.next=8,s.ajaxWithData("POST","feedback",f);case 8:p=e.sent,c(p);case 10:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}())}function b(){return new Promise(function(){var e=u(regeneratorRuntime.mark((function e(n,t){var a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new r.a,"logout",e.next=4,a.ajaxWithoutData("GET","logout",!0);case 4:o=e.sent,n(o);case 6:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}())}function w(e,n,t){return new Promise(function(){var a=u(regeneratorRuntime.mark((function a(o,i){var c,u,s,f;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return c=new r.a,u="notebooks/".concat(e,"/notecards/").concat(n),(s=new FormData).append("attachment",t),a.next=6,c.ajaxWithData("PUT",u,s);case 6:f=a.sent,o(f);case 8:case"end":return a.stop()}}),a)})));return function(e,n){return a.apply(this,arguments)}}())}function x(e,n,t){return new Promise(function(){var a=u(regeneratorRuntime.mark((function a(o,i){var c,u,s,f,d,p;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:for(c=[],u=0;u<t.length;u++)c.push(t[u].tag_id);return s=new r.a,f="notebooks/".concat(e,"/notecards/").concat(n,"/tags"),(d=new FormData).append("JSONString",JSON.stringify({tag_ids:c})),a.next=8,s.ajaxWithData("PUT",f,d);case 8:p=a.sent,o(p);case 10:case"end":return a.stop()}}),a)})));return function(e,n){return a.apply(this,arguments)}}())}function O(){return new Promise(function(){var e=u(regeneratorRuntime.mark((function e(n,t){var a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new r.a,"tags?offset=0&limit=1000",e.next=4,a.ajaxWithData("GET","tags?offset=0&limit=1000");case 4:o=e.sent,n(o);case 6:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}())}function _(e,n){return new Promise((function(t,r){var a=[];n=n.toLowerCase(),e.map((function(e){e.name.toLowerCase().startsWith(n)&&a.push(e)})),t(JSON.stringify({code:200,tags:a}))}))}function k(){return new Promise(function(){var e=u(regeneratorRuntime.mark((function e(n,t){var r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"chromeClipper",(r=new XMLHttpRequest).onload=function(){n(this.responseText)},r.onerror=function(e){t(e)},r.open("GET","https://notebook.zoho.com/api/v1/announcements?last_announcement_time=1&platform=chromeClipper"),e.next=7,Object(i.c)("znbcsr");case 7:if(a=e.sent){e.next=11;break}return t(),e.abrupt("return");case 11:r.setRequestHeader("X-ZCSRF-TOKEN","znbrcsr="+a.znbcsr),r.send();case 13:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}())}function y(e){return new Promise(function(){var n=u(regeneratorRuntime.mark((function n(t,a){var o,i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=new r.a,n.next=3,o.ajaxWithoutData("GET",e,!1,!0);case 3:i=n.sent,t(i);case 5:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())}function T(e,n,t){return new Promise(function(){var a=u(regeneratorRuntime.mark((function a(o,i){var c,u,s,f;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return c=new r.a,u=new FormData,s={name:"Untitled.pdf",notecard_name:"Untitled"},e&&"undefined"!==e&&(s.notebook_id=e),u.append("attachment",n,t||"Untitled.pdf"),u.append("JSONString",JSON.stringify(s)),"cards/file",a.next=9,c.ajaxWithData("POST","cards/file",u);case 9:f=a.sent,o(f);case 11:case"end":return a.stop()}}),a)})));return function(e,n){return a.apply(this,arguments)}}())}function S(){return new Promise(function(){var e=u(regeneratorRuntime.mark((function e(n,t){var a,c,u,s,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new r.a).setNoPrepend(!0),a.setResponseType("blob"),c=o.a.getTopLevelDomain(),e.next=6,Object(i.c)("userprofile");case 6:if((u=e.sent)&&u.userprofile){e.next=10;break}return n(void 0),e.abrupt("return");case 10:return s="https://contacts.zoho".concat(c,"/file?t=user&ID=").concat(u.userprofile.zuid,"&fs=thumb"),e.next=13,a.ajaxWithoutData("GET",s);case 13:f=e.sent,n(f);case 15:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}())}function E(e){return new Promise(function(){var n=u(regeneratorRuntime.mark((function n(t,a){var o,i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return(o=new r.a).setResponseType("blob"),n.next=4,o.ajaxWithoutData("GET","covers/".concat(e,"/thumbnail?size=m"));case 4:i=n.sent,t(i);case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())}function R(e){return new Promise(function(){var n=u(regeneratorRuntime.mark((function n(t,a){var c,u,s;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return(c=new r.a).setNoPrepend(!0),c.setResponseType("blob"),o.a.getTopLevelDomain(),n.next=6,Object(i.c)("userprofile");case 6:if((u=n.sent)&&u.userprofile){n.next=10;break}return t(void 0),n.abrupt("return");case 10:return n.next=12,c.ajaxWithoutData("GET",e);case 12:s=n.sent,t(s);case 14:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())}}});