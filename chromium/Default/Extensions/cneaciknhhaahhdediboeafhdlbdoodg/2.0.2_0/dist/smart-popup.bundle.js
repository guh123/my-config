!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=27)}([function(e,t,n){"use strict";n.d(t,"e",(function(){return r})),n.d(t,"f",(function(){return o})),n.d(t,"g",(function(){return a})),n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return u})),n.d(t,"h",(function(){return c})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return d})),n.d(t,"i",(function(){return l}));chrome.extension,chrome.storage;var r=chrome.storage.local,o=chrome.runtime,a=chrome.tabs,i=chrome.browserAction,u=chrome.cookies,c=chrome.webNavigation,s=chrome.contextMenus,d=chrome.i18n,l=chrome.windows;chrome.webRequest},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(7),o=n(2);function a(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function u(e){a(i,r,o,u,c,"next",e)}function c(e){a(i,r,o,u,c,"throw",e)}u(void 0)}))}}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var t=r.a.getDomain();this.urlPrefix="".concat(t,"/api/v1/"),this.accountPrefix="".concat(r.a.getAccountDomain(),"/"),this.noPrepend=!1,this.responseType=void 0}var t,n,a;return t=e,(n=[{key:"setNoPrepend",value:function(e){return this.noPrepend=e,this}},{key:"setResponseType",value:function(e){return this.responseType=e,this}},{key:"ajaxWithoutData",value:function(e,t,n,r){var a=this;return new Promise(function(){var u=i(regeneratorRuntime.mark((function i(u,c){var s,d;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return(s=new XMLHttpRequest).onload=function(){r||"blob"===this.responseType?u(this.response):u(this.responseText)},s.onerror=function(e){c(e)},s.open(e,a.prependUrl(t,n,r)),i.next=6,Object(o.c)("znbcsr");case 6:if(d=i.sent){i.next=10;break}return c(),i.abrupt("return");case 10:r&&(s.responseType="blob",s.setRequestHeader("processData",!1),s.setRequestHeader("contentType",!1)),a.responseType&&(s.responseType=a.responseType),s.setRequestHeader("X-ZCSRF-TOKEN","znbrcsr="+d.znbcsr),s.send();case 14:case"end":return i.stop()}}),i)})));return function(e,t){return u.apply(this,arguments)}}())}},{key:"ajaxWithData",value:function(e,t,n){var r=this;return new Promise(function(){var a=i(regeneratorRuntime.mark((function a(i,u){var c,s;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return(c=new XMLHttpRequest).onload=function(e){i(this.responseText)},c.onerror=function(e){u(e)},c.open(e,r.prependUrl(t)),a.next=6,Object(o.c)("znbcsr");case 6:if(s=a.sent){a.next=10;break}return u(),a.abrupt("return");case 10:c.setRequestHeader("X-ZCSRF-TOKEN","znbrcsr="+s.znbcsr),c.send(n);case 12:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}())}},{key:"prependUrl",value:function(e,t,n){return n||this.noPrepend?e:t?"".concat(this.accountPrefix).concat(e):"".concat(this.urlPrefix).concat(e)}}])&&u(t.prototype,n),a&&u(t,a),e}()},function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return a})),n.d(t,"g",(function(){return i})),n.d(t,"d",(function(){return u})),n.d(t,"a",(function(){return c})),n.d(t,"e",(function(){return s})),n.d(t,"f",(function(){return d}));var r=n(0);function o(e){return new Promise((function(t,n){try{r.a.get(e,(function(e){t(e)}))}catch(e){t(void 0)}}))}function a(e){return new Promise((function(t,n){try{r.e.get(e,(function(e){t(e)}))}catch(e){t(void 0)}}))}function i(e){return new Promise((function(t,n){try{r.e.set(e,(function(){t(!0)}))}catch(e){t(!1)}}))}function u(e){return new Promise((function(t,n){try{r.e.remove(e,(function(){t(!0)}))}catch(e){t(!1)}}))}function c(e){return new Promise((function(t,n){try{r.i.create(e,(function(e){t(e)}))}catch(e){t(void 0)}}))}function s(e){return new Promise((function(t,n){try{r.f.sendMessage(e,(function(e){t(e)}))}catch(e){t(void 0)}}))}function d(e,t){return new Promise((function(n,o){try{r.g.sendMessage(e,t,(function(e){n(e)}))}catch(e){n(void 0)}}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r={SEND_ANALYTICS:1e3,SIGN_IN:1001,USER_WINDOW:1002,DOWNLOAD_BOOK_LIST:1003,INIT_WINDOW:1004,GET_TAB_ID:1005,GET_DOCUMENT:1006,INIT_READER_VIEW:1007,DISPLAY_READER_FRAME:1008,GET_STATUS:1009,CREATE_TAG:1010,SEARCH_TAG:1011,SEND_FEEDBACK:1012,SIGN_OUT:1013,GET_ALL_TAGS:1014,SEARCH_TAG_FROM_LIST:1015,FETCH_ANNOUNCEMENT:1016,SHOW_MEETING_NOTE:1017,SAVE_MEETING_NOTE:1018,SHOW_RECIPE_POPUP:1019,CLOSE_RECIPE_POPUP:1020,SHOW_PDF_POPUP:1021,RESET_TOOLBAR_ICON:1022,SHOW_TOAST:1023,HIDE_TOAST:1024,GET_LOGIN_STATUS:1025,APP_LOADING:1026,PARTIAL_CAPTURE:1027,GET_USER_IMAGE:1028,PART_PAGE_SCREENSHOT:1029,FOCUSED_PAGE_SCREENSHOT:1030,GET_NB_DOMAIN:1031,PARTIAL_ANNOTATION_FUNC:1032,TAKE_SCREENSHOT:1033,GET_CURRENT_TAB:1034,SAVE_POSITION:1035,FETCH_NOTEBOOK_IMAGE:1036,FLUSH_CACHED_CARD:1037,FULL_PAGE_SCREENSHOT:1038,OPEN_ANNOTATOR:1039,SHOW_LOADING_IFRAME:1040,HIDE_LOADING_IFRAME:1041,DOWNLOAD_FROM_URL:1042}},function(e,t,n){"use strict";function r(e,t){return function(e,t){var n=e.getDate(),r=e.getMonth(),a=r+1,i=e.getFullYear(),u=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][r],c=e.getHours(),s=e.getMinutes(),d=e.getSeconds(),l="AM";c>=12&&(l="PM");c>12&&(c-=12);switch(t){case"dd-MMM, yyyy":return o(n)+"-"+u+", "+i;case"YYYY-MM-DDTHH:mm:SS+0530":return i+"-"+o(a)+"-"+o(n)+"T"+o(c)+":"+o(s)+":"+o(d)+"+0530";case"YYYY-MM-DDTHH:mm:SS+0000":return i+"-"+o(a)+"-"+o(n)+"T"+o(c)+":"+o(s)+":"+o(d)+"+0000";case"dd/MM/YYYY":return o(n)+"/"+o(a)+"/"+i;case"HH:mm:SS":return o(c)+":"+o(s)+":"+o(d);case"HH:mm M, MMM dd, yyyy":return o(c)+":"+o(s)+" "+l+", "+u+" "+o(n)+", "+i;default:return n+" "+u+" "+i}}(new Date(e),t)}function o(e){return e<10?"0"+e:""+e}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}))},function(e,t,n){"use strict";n.d(t,"j",(function(){return d})),n.d(t,"e",(function(){return l})),n.d(t,"p",(function(){return p})),n.d(t,"u",(function(){return f})),n.d(t,"t",(function(){return m})),n.d(t,"l",(function(){return g})),n.d(t,"r",(function(){return v})),n.d(t,"q",(function(){return h})),n.d(t,"g",(function(){return y})),n.d(t,"s",(function(){return b})),n.d(t,"k",(function(){return w})),n.d(t,"m",(function(){return E})),n.d(t,"y",(function(){return T})),n.d(t,"f",(function(){return x})),n.d(t,"o",(function(){return O})),n.d(t,"w",(function(){return S})),n.d(t,"c",(function(){return k})),n.d(t,"h",(function(){return I})),n.d(t,"v",(function(){return _})),n.d(t,"x",(function(){return C})),n.d(t,"z",(function(){return R})),n.d(t,"a",(function(){return D})),n.d(t,"i",(function(){return A})),n.d(t,"d",(function(){return M})),n.d(t,"b",(function(){return F})),n.d(t,"n",(function(){return N}));var r=n(2),o=n(3),a=n(0),i=n(4),u=n(8);n(9);function c(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){c(a,r,o,i,u,"next",e)}function u(e){c(a,r,o,i,u,"throw",e)}i(void 0)}))}}function d(){var e,t,n=navigator.userAgent,r=(navigator.appName,""+parseFloat(navigator.appVersion)),o=parseInt(navigator.appVersion,10);-1!=(e=n.indexOf("Chrome"))?("Chrome",r=n.substring(e+7)):n.lastIndexOf(" ")+1<(e=n.lastIndexOf("/"))&&(r=n.substring(e+1)),-1!=(t=r.indexOf(";"))&&(r=r.substring(0,t)),-1!=(t=r.indexOf(" "))&&(r=r.substring(0,t)),o=parseInt(""+r,10),isNaN(o)&&(r=""+parseFloat(navigator.appVersion),o=parseInt(navigator.appVersion,10));var i={platformVersion:r,deviceName:navigator.userAgent,deviceType:"Web"},u=a.f.getManifest().version;return i.appVersion=u,i.appName="Chrome Extension - "+u,i.platformName="Chrome",i}function l(){return(new Date).getTime()}function p(){var e=navigator.language;return"zh"===e||"zh-CN"===e||"zh-TW"===e}function f(e,t){document.createElement(e).constructor===HTMLElement&&customElements.define(e,t)}function m(e){return new Promise((function(t,n){for(var r=[],o=0,a=0;a<e.length;a++){var i=new FileReader;i.onload=u,i.readAsDataURL(e[a])}function u(){r.push(this.result),++o===e.length&&t(r)}}))}function g(){return new Promise(function(){var e=s(regeneratorRuntime.mark((function e(t,n){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(r.c)("notebookList");case 2:(i=e.sent)&&i.length||a.f.sendMessage({action:o.a.DOWNLOAD_BOOK_LIST},(function(e){var n=[];e&&(e=JSON.parse(e))&&h(e.code)&&(n=e.notebooks),t(n)}));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())}function v(e){return new Promise((function(t,n){if(fileMap[e])t(!0);else{var r=document.createElement("script");document.head.appendChild(r),r.onload=function(){fileMap[e]=!0,t(!0)},r.onerror=function(){n(!1)},r.src=e}}))}function h(e){return 200===e||201===e}function y(e){e&&(e.focus(),e.innerText&&b(e))}function b(e){var t,n;document.createRange?((t=document.createRange()).selectNodeContents(e),t.collapse(!1),(n=window.getSelection()).removeAllRanges(),n.addRange(t)):document.selection&&((t=document.body.createTextRange()).moveToElementText(e),t.collapse(!1),t.select())}function w(){var e,t,n,r,o=new Date;return o.getFullYear()+"-"+Object(i.b)(o.getMonth()+1)+"-"+Object(i.b)(o.getDate())+"T"+(Object(i.b)(o.getHours())+":"+Object(i.b)(o.getMinutes())+":"+Object(i.b)(o.getSeconds()))+(e=o.getTimezoneOffset()/60,t=e<0?"+":"-",n=Math.floor(Math.abs(e)),r=Math.floor(60*Math.abs(e)%60),t+Object(i.b)(n)+""+Object(i.b)(r))}function E(){return new Promise(function(){var e=s(regeneratorRuntime.mark((function e(t,n){var o,a,i,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(r.c)("userprofile");case 2:o=e.sent,a=void 0,o&&(a=o.userprofile)&&a.default_notecard_color&&"random"!==a.default_notecard_color.toLowerCase()&&t(a.default_notecard_color),u=(i=["#FFB47A","#FFEE8A","#FFC96C","#FFFFFF","#FF9575","#FF8785","#E9FF9D","#B3FFE8","#83D2FF","#CDC2FF","#F9D3FF","#D9E8F0"]).length,0,t(i[Math.floor(Math.random()*(u-0)+0)]);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())}function T(e){if(-1!==e.indexOf("rgb")){var t=(e=e.substring(e.indexOf("(")+1,e.indexOf(")"))).split(",");return"#"+(16777216+(t[2]|t[1]<<8|t[0]<<16)).toString(16).slice(1)}return e}function x(e){for(var t=e.split(","),n=t[0].match(/:(.*?);/)[1],r=atob(t[1]),o=r.length,a=new Uint8Array(o);o--;)a[o]=r.charCodeAt(o);return new Blob([a],{type:n})}function O(e,t){for(var n=0;n<e.length;n++){var r=e[n];r.is_read=!1;for(var o=0;o<t.length;o++){var a=t[o];if(a.announcement_id===r.announcement_id){r.is_read=a.is_read;break}}}return e}function S(e,t,n){return e?(e=(e=(e=(e=e.replace(/<article/g,"<div").replace(/<\/article>/g,"</div>")).replace(/<main/g,"<div").replace(/<\/main>/g,"</div>")).replace(/<section/g,"<div").replace(/<\/section>/g,"</div>")).replace(/<br>/g,"<br/>").replace(/<hr>/g,"<hr/>"),"true"===t&&function(e){e=Object(u.a)(e)}(e),e=(e=e.replace(/[\u2028\u2029]/gim,"<br />")).replace(/[\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/gim,""),"true"===n&&(e=e.replace(/"/g,"\\'")),e):e}function k(){return new Promise(function(){var e=s(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(r.d)("znbcsr");case 2:t(!0);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())}function I(e){if(e&&e.length){for(var t=document.createDocumentFragment(),n=0;n<e.length;n++){var r=document.createElement("div");r.id=e[n].notebook_id,r.classList.add("each-book"),r.innerText=e[n].name,t.appendChild(r)}return t}}function _(e,t){for(var n=(new DOMParser).parseFromString(e,"text/html"),r=n.querySelectorAll("script"),o=0;o<r.length;o++)r[o].parentElement.removeChild(r[o]);for(var a=n.querySelectorAll("iframe"),i=0;i<a.length;i++)a[i].parentElement.removeChild(a[i]);for(var u=n.querySelectorAll("style"),c=0;c<u.length;c++)u[c].parentElement.removeChild(u[c]);for(var s=n.querySelectorAll("button"),d=0;d<s.length;d++)s[d].parentElement.removeChild(s[d]);for(var l=n.querySelectorAll("input"),p=0;p<l.length;p++)l[p].parentElement.removeChild(l[p]);for(var f=n.querySelectorAll("textarea"),m=0;m<f.length;m++)f[m].parentElement.removeChild(f[m]);for(var g=n.querySelectorAll(".clipper-space"),v=0;v<g.length;v++){var h=document.createElement("div");h.innerHTML=g[v].innerHTML,g[v].parentElement.appendChild(h),g[v].parentElement.removeChild(g[v])}if(!t){for(var y=n.querySelectorAll("image-view"),b=0;b<y.length;b++)y[b].parentElement.removeChild(y[b]);for(var w=n.querySelectorAll("p"),E=0;E<w.length;E++)w[E].innerText&&w[E].innerText.trim()||w[E].querySelector("img")||w[E].parentElement.removeChild(w[E]);for(var T=n.querySelectorAll("br"),x=0;x<T.length;x++)T[x].innerText&&T[x].innerText.trim()||T[x].querySelector("img")||T[x].parentElement.removeChild(T[x]);for(var O=n.querySelectorAll("div"),S=0;S<O.length;S++)O[S].innerText&&O[S].innerText.trim()||O[S].querySelector("img")||O[S].parentElement.removeChild(O[S])}return n.body.innerHTML}function C(e){for(var t=(new DOMParser).parseFromString(e,"text/html"),n=t.querySelectorAll("image-view"),r=0;r<n.length;r++){var o=document.createTextNode("-()-");n[r].parentElement.replaceChild(o,n[r])}return"undefined"===t.body.innerHTML?"":t.body.innerHTML}function R(e,t){return new Promise(function(){var n=s(regeneratorRuntime.mark((function n(o,a){var i,u,c,s;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(r.c)("analyticsShown");case 2:for(i=n.sent,c=!0,i&&i.analyticsShown?u=i.analyticsShown:(u="[]",c=!0),u=JSON.parse(u),s=0;s<u.length;s++)u[s].zuid===t&&(u[s].shown=e,c=!1);return c&&u.push({shown:e,zuid:t}),n.next=10,Object(r.g)({analyticsShown:JSON.stringify(u)});case 10:o(!0);case 11:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())}function D(e){return new Promise(function(){var t=s(regeneratorRuntime.mark((function t(n,o){var a,i,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(r.c)("analyticsShown");case 2:a=t.sent,i=a&&a.analyticsShown?a.analyticsShown:"[]",i=JSON.parse(i),u=0;case 6:if(!(u<i.length)){t.next=13;break}if(i[u].zuid!==e){t.next=10;break}return n(!1),t.abrupt("return");case 10:u++,t.next=6;break;case 13:n(!0);case 14:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())}function A(e){return new Promise(function(){var t=s(regeneratorRuntime.mark((function t(n,o){var a,i,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(r.c)("analyticsShown");case 2:a=t.sent,i=a&&a.analyticsShown?a.analyticsShown:"[]",i=JSON.parse(i),u=0;case 6:if(!(u<i.length)){t.next=13;break}if(i[u].zuid!==e){t.next=10;break}return n(i[u].shown),t.abrupt("return");case 10:u++,t.next=6;break;case 13:n(!1);case 14:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())}function M(e){return new Promise((function(t,n){var r=e.querySelectorAll("img");if(r&&r.length)for(var i=function(e){var n=r[e].src;if(!n)return"continue";a.f.sendMessage({action:o.a.DOWNLOAD_FROM_URL,data:{url:n}},(function(n){var o=document.createElement("image-view");o.setAttribute("image-data",n),o.setAttribute("dont_load_annotator",!0),o.id="image-view_"+l();var a=document.createElement("div"),i=document.createElement("div");i.innerHTML="<div class='clipper-space'><br></div>",a.appendChild(i),a.appendChild(o);var u=document.createElement("div");u.innerHTML="<div class='clipper-space'><br></div>",a.appendChild(u);var c=r[e].parentElement;c.removeChild(r[e]),c.appendChild(a),t(!0)}))},u=0;u<r.length;u++)i(u)}))}function F(e){for(var t=(new DOMParser).parseFromString(e,"text/html"),n=t.querySelectorAll("img"),r=0;r<n.length;r++)if(n[r].src&&-1===n[r].src.indexOf("http"))if(-1!==n[r].src.indexOf("moz-extension://")||-1!==n[r].src.indexOf("chrome-extension://")){var o=new URL(n[r].src);n[r].src=currentTab.url+o.pathname}else n[r].src=currentTab.url+n[r].src;return t.body.innerHTML}function N(e){if(!e||!e.trim())return"#212121";var t,n,r;if(e.match(/#/))t=function(e){return e=B(e),parseInt(e.substring(0,2),16)}(e),n=function(e){return e=B(e),parseInt(e.substring(2,4),16)}(e),r=function(e){return e=B(e),parseInt(e.substring(4,6),16)}(e);else{var o=e.substring(e.indexOf("(")+1,e.lastIndexOf(")")).split(/,\s*/);t=o[0],n=o[1],r=o[2]}return Math.round((299*parseInt(t)+587*parseInt(n)+114*parseInt(r))/1e3)>125?"#212121":"#FFFFFF"}function B(e){return"#"===e.charAt(0)?e.substring(1,7):e}},,function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.d(t,"a",(function(){return o}));var o=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.setup="https://notebook.zoho",this.accountsSetup="https://accounts.zoho",this.topLevelDomain=".com"}var t,n,o;return t=e,(n=[{key:"setSetup",value:function(e){return this.setup=e,this}},{key:"setTopLevelDomain",value:function(e){return this.topLevelDomain=e,this}},{key:"getTopLevelDomain",value:function(){return this.topLevelDomain}},{key:"getAccountsSetup",value:function(){return this.accountsSetup}},{key:"getSetup",value:function(){return this.setup}},{key:"getDomain",value:function(){return this.setup+""+this.topLevelDomain}},{key:"getAccountDomain",value:function(){return this.accountsSetup+""+this.topLevelDomain}}])&&r(t.prototype,n),o&&r(t,o),e}())},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r={elements:["a","b","br","caption","cite","code","col","colgroup","dd","dl","dt","em","h1","h2","h3","h4","h5","h6","i","img","li","ol","p","q","small","strike","strong","sub","sup","table","tbody","td","tfoot","th","thead","tr","u","ul","div","span","figure","article","section"],attributes:{a:["href"],img:["type","height","src","width","duration","class","remotesrc","org-width","org-height","consumers","local-id"],col:["span","width"],colgroup:["span","width"],ol:["start","type"],q:["cite"],table:["summary","width"],td:["abbr","axis","colspan","rowspan","width"],th:["abbr","axis","colspan","rowspan","scope","width"],ul:["type"]},protocols:{a:{href:["http","https","mailto","tel"]},img:{src:["http","https","zresource"]}}};function o(e){for(var t=e.getElementsByTagName("style"),n=0;n<t.length;n++)t[n].parentNode.removeChild(t[n]);return e}function a(e){var t=document.createElement("div");t.innerHTML=e,t=o(t);var n=new Sanitize(r).clean_node(t),a=document.createElement("div");a.appendChild(n.cloneNode(!0));var i=a.innerHTML;return i=(i=i.replace(/[\u2028\u2029]/gim,"<br />")).replace(/[\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/gim,"")}},function(e,t,n){"use strict";n.d(t,"e",(function(){return s})),n.d(t,"k",(function(){return d})),n.d(t,"j",(function(){return l})),n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return f})),n.d(t,"o",(function(){return m})),n.d(t,"l",(function(){return g})),n.d(t,"c",(function(){return v})),n.d(t,"n",(function(){return h})),n.d(t,"q",(function(){return y})),n.d(t,"r",(function(){return b})),n.d(t,"p",(function(){return w})),n.d(t,"g",(function(){return E})),n.d(t,"m",(function(){return T})),n.d(t,"h",(function(){return x})),n.d(t,"i",(function(){return k})),n.d(t,"d",(function(){return I})),n.d(t,"f",(function(){return _}));var r=n(1),o=n(5),a=n(7),i=n(2);function u(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){u(a,r,o,i,c,"next",e)}function c(e){u(a,r,o,i,c,"throw",e)}i(void 0)}))}}function s(){return(new r.a).ajaxWithoutData("GET","notebooks?sort_column=-Notebook.LastModifiedTime&offset=0&limit=100")}function d(){return new Promise(function(){var e=c(regeneratorRuntime.mark((function e(t,n){var o,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=new r.a,e.next=3,o.ajaxWithoutData("GET","userprofile/accounts/status");case 3:a=e.sent,t(a);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())}function l(){return new Promise(function(){var e=c(regeneratorRuntime.mark((function e(t,n){var o,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=new r.a,e.next=3,o.ajaxWithoutData("GET","userprofile");case 3:a=e.sent,t(a);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())}function p(e){return new Promise(function(){var t=c(regeneratorRuntime.mark((function t(n,o){var a,i,u,c,s,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("note/file"!==e.type){t.next=10;break}return t.next=3,O(e.fileUrl);case 3:return a=t.sent,t.next=6,S(e.notebook_id,a,"");case 6:i=t.sent,n(i),t.next=19;break;case 10:return u=new r.a,(c=new FormData).append("attachment",e.znml),s="notebooks/".concat(e.notebook_id,"/notecards"),e.notebook_id&&"undefined"!==e.notebook_id||(s="notecards"),t.next=17,u.ajaxWithData("POST",s,c);case 17:d=t.sent,n(d);case 19:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())}function f(e,t,n,a){return new Promise(function(){var i=c(regeneratorRuntime.mark((function i(u,c){var s,d,l,p,f;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return s=new r.a,d=Object(o.f)(n),(l=new FormData).append("attachment",d,a),p="notebooks/".concat(e,"/notecards/").concat(t,"/resources"),i.next=7,s.ajaxWithData("POST",p,l);case 7:f=i.sent,u(f);case 9:case"end":return i.stop()}}),i)})));return function(e,t){return i.apply(this,arguments)}}())}function m(e,t,n){return new Promise(function(){var o=c(regeneratorRuntime.mark((function o(a,i){var u,c,s,d;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return u=new r.a,(c=new FormData).append("JSONString",JSON.stringify({reminders:[{type:"reminder/time",reminder_time:n,created_time:(new Date).getTime()}]})),s="notebooks/".concat(e,"/notecards/").concat(t,"/reminders"),o.next=6,u.ajaxWithData("POST",s,c);case 6:d=o.sent,a(d);case 8:case"end":return o.stop()}}),o)})));return function(e,t){return o.apply(this,arguments)}}())}function g(e){return new Promise(function(){var t=c(regeneratorRuntime.mark((function t(n,o){var a,i,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=new r.a,i="tags/search?query=".concat(e,"&limit=5"),t.next=4,a.ajaxWithData("GET",i);case 4:u=t.sent,n(u);case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())}function v(e,t){return new Promise(function(){var n=c(regeneratorRuntime.mark((function n(o,a){var i,u,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=new r.a,"tags",(u=new FormData).append("JSONString",JSON.stringify({name:e,created_time:(new Date).getTime(),resource_id:t})),n.next=6,i.ajaxWithData("POST","tags",u);case 6:c=n.sent,o(c);case 8:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())}function h(e){var t=e.sender,n=e.content,a=e.base64,i=e.imageName;return new Promise(function(){var e=c(regeneratorRuntime.mark((function e(u,c){var s,d,l,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=new r.a,"feedback",d=new FormData,a&&(l=Object(o.f)(a),d.append("attachment",l,i)),"Notebook - Chrome Extension Feedback",d.append("JSONString",JSON.stringify({subject:"Notebook - Chrome Extension Feedback",sender:t,content:n})),e.next=8,s.ajaxWithData("POST","feedback",d);case 8:p=e.sent,u(p);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())}function y(){return new Promise(function(){var e=c(regeneratorRuntime.mark((function e(t,n){var o,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=new r.a,"logout",e.next=4,o.ajaxWithoutData("GET","logout",!0);case 4:a=e.sent,t(a);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())}function b(e,t,n){return new Promise(function(){var o=c(regeneratorRuntime.mark((function o(a,i){var u,c,s,d;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return u=new r.a,c="notebooks/".concat(e,"/notecards/").concat(t),(s=new FormData).append("attachment",n),o.next=6,u.ajaxWithData("PUT",c,s);case 6:d=o.sent,a(d);case 8:case"end":return o.stop()}}),o)})));return function(e,t){return o.apply(this,arguments)}}())}function w(e,t,n){return new Promise(function(){var o=c(regeneratorRuntime.mark((function o(a,i){var u,c,s,d,l,p;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:for(u=[],c=0;c<n.length;c++)u.push(n[c].tag_id);return s=new r.a,d="notebooks/".concat(e,"/notecards/").concat(t,"/tags"),(l=new FormData).append("JSONString",JSON.stringify({tag_ids:u})),o.next=8,s.ajaxWithData("PUT",d,l);case 8:p=o.sent,a(p);case 10:case"end":return o.stop()}}),o)})));return function(e,t){return o.apply(this,arguments)}}())}function E(){return new Promise(function(){var e=c(regeneratorRuntime.mark((function e(t,n){var o,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=new r.a,"tags?offset=0&limit=1000",e.next=4,o.ajaxWithData("GET","tags?offset=0&limit=1000");case 4:a=e.sent,t(a);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())}function T(e,t){return new Promise((function(n,r){var o=[];t=t.toLowerCase(),e.map((function(e){e.name.toLowerCase().startsWith(t)&&o.push(e)})),n(JSON.stringify({code:200,tags:o}))}))}function x(){return new Promise(function(){var e=c(regeneratorRuntime.mark((function e(t,n){var r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"chromeClipper",(r=new XMLHttpRequest).onload=function(){t(this.responseText)},r.onerror=function(e){n(e)},r.open("GET","https://notebook.zoho.com/api/v1/announcements?last_announcement_time=1&platform=chromeClipper"),e.next=7,Object(i.c)("znbcsr");case 7:if(o=e.sent){e.next=11;break}return n(),e.abrupt("return");case 11:r.setRequestHeader("X-ZCSRF-TOKEN","znbrcsr="+o.znbcsr),r.send();case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())}function O(e){return new Promise(function(){var t=c(regeneratorRuntime.mark((function t(n,o){var a,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=new r.a,t.next=3,a.ajaxWithoutData("GET",e,!1,!0);case 3:i=t.sent,n(i);case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())}function S(e,t,n){return new Promise(function(){var o=c(regeneratorRuntime.mark((function o(a,i){var u,c,s,d;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return u=new r.a,c=new FormData,s={name:"Untitled.pdf",notecard_name:"Untitled"},e&&"undefined"!==e&&(s.notebook_id=e),c.append("attachment",t,n||"Untitled.pdf"),c.append("JSONString",JSON.stringify(s)),"cards/file",o.next=9,u.ajaxWithData("POST","cards/file",c);case 9:d=o.sent,a(d);case 11:case"end":return o.stop()}}),o)})));return function(e,t){return o.apply(this,arguments)}}())}function k(){return new Promise(function(){var e=c(regeneratorRuntime.mark((function e(t,n){var o,u,c,s,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(o=new r.a).setNoPrepend(!0),o.setResponseType("blob"),u=a.a.getTopLevelDomain(),e.next=6,Object(i.c)("userprofile");case 6:if((c=e.sent)&&c.userprofile){e.next=10;break}return t(void 0),e.abrupt("return");case 10:return s="https://contacts.zoho".concat(u,"/file?t=user&ID=").concat(c.userprofile.zuid,"&fs=thumb"),e.next=13,o.ajaxWithoutData("GET",s);case 13:d=e.sent,t(d);case 15:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())}function I(e){return new Promise(function(){var t=c(regeneratorRuntime.mark((function t(n,o){var a,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(a=new r.a).setResponseType("blob"),t.next=4,a.ajaxWithoutData("GET","covers/".concat(e,"/thumbnail?size=m"));case 4:i=t.sent,n(i);case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())}function _(e){return new Promise(function(){var t=c(regeneratorRuntime.mark((function t(n,o){var u,c,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(u=new r.a).setNoPrepend(!0),u.setResponseType("blob"),a.a.getTopLevelDomain(),t.next=6,Object(i.c)("userprofile");case 6:if((c=t.sent)&&c.userprofile){t.next=10;break}return n(void 0),t.abrupt("return");case 10:return t.next=12,u.ajaxWithoutData("GET",e);case 12:s=t.sent,n(s);case 14:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())}},function(e,t,n){"use strict";function r(){var e=["#FFFFFF","#FFEF8A","#FFC96C","#FFB47A","#FF9575","#FF8785","#E9FF9D","#B3FFE8","#83D2FF","#CDC2FF","#F9D3FF","#D9E8F0"];return e[Math.floor(Math.random()*e.length)]}function o(e,t,n){return"#"+(16777216+(n|t<<8|e<<16)).toString(16).slice(1)}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}))},,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t);var r=n(0),o=n(5),a=n(3),i=n(10);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c,s=void 0,d=void 0;function l(e){var t,n;document.createRange?((t=document.createRange()).selectNodeContents(e),t.collapse(!1),(n=window.getSelection()).removeAllRanges(),n.addRange(t)):document.selection&&((t=document.body.createTextRange()).moveToElementText(e),t.collapse(!1),t.select())}function p(){var e=document.getElementById("popup-editor-wrap"),t=document.getElementById("popup-minimize");parent.postMessage("maximize","*");var n=document.getElementById("popup-header");n&&(n.style.borderBottom="solid 1px rgba(0, 0, 0, 0.1)"),e.classList.remove("minimize"),t.classList.remove("close");var r=document.getElementById("popup-editor");r&&(r.style.display="block")}window.onbeforeunload=function(){var e=document.getElementById("popup-title"),t=document.getElementById("popup-editor"),n=document.getElementById("popup-editor-wrap").style.backgroundColor;if(""===n&&(n="#ffffff"),-1!==n.indexOf("rgb")){var r=n.substring(n.indexOf("(")+1,n.indexOf(")")).split(",");n=Object(i.b)(r[0],r[1],r[2])}t&&(t.getAttribute("data-meeting"),t.innerHTML);var o=t.innerText;(e&&e.value&&e.value.trim()||t&&t.innerText&&t.innerText.trim())&&s.postMessage({tab_id:d,unsaved_textcard:{title:e.value,color:n,content:o,isBrowserClose:!0},save:!0})},document.onkeydown=function(e){if(27===e.keyCode){var t=document.getElementById("notebook-wrap");t&&(t.style.display="none"),e.stopPropagation()}},r.f.sendMessage({action:a.a.GET_CURRENT_TAB},(function(e){d=e.id,(s=r.f.connect({name:""+d})).onMessage.addListener((function(e){if(e)switch(e.action){case"cardCreated":var t=document.getElementById("circle-loader-save"),n=document.getElementById("smart-message");t&&(t.style.display="none"),n&&(n.classList.remove("show"),setTimeout((function(){n.classList.add("show")}),200)),function(){var e=document.getElementById("popup-wrap");if(e){var t=document.getElementById("notebook-wrap");t&&e.removeChild(t)}}()}}))})),function(){document.getElementById("popup-editor-wrap");var e=document.getElementById("smart-popup");e&&(e.onclick=function(){parent.postMessage("increaseSmartPopup","*"),function(){var e=document.getElementById("popup-editor-wrap"),t=document.getElementById("popup-done");t&&(t.style.visibility="initial");var n=document.getElementById("popup-editor");n&&(n.innerHTML="",n.style.display="block",setTimeout((function(){n.setAttribute("data-meeting","<div>"+c+" on "+function(){var e="",t=new Date,n=t.getHours(),r="am";n>=12&&(r="pm"),n>12&&(n-=12),n<10&&(n="0"+n);var o=t.getMinutes();return o<10&&(o="0"+o),e+=["January","February","March","April","May","June","July","August","September","October","November","December"][t.getMonth()]+" "+t.getDate()+", "+t.getFullYear()+" at "+n+":"+o+" "+r}()+"</div><hr>")}),300)),n.onpaste=function(e){n.innerText+=e.clipboardData.getData("text/plain"),l(n),e.preventDefault()};var r=document.getElementById("popup-title");r&&(r.value="",r.onkeypress=function(t){13===t.keyCode&&(l(n),e.classList.contains("minimize")&&p())},r.onfocus=function(e){e.stopPropagation()});var o=document.getElementById("circle-loader");o&&(o.style.display="none");var a=document.getElementById("popup-header");a&&(a.style.borderBottom="solid 1px rgba(0, 0, 0, 0.1)"),e&&(e.style.backgroundColor=Object(i.a)()),v()}()});var t,n=document.getElementById("ismart-x");n&&(n.onclick=function(e){var t=document.getElementById("smart-popup");t&&t.classList.add("smart-popup-hide"),setTimeout((function(){parent.postMessage("closeForThisSession","*");var e=document.getElementById("close-toast");e&&e.classList.add("show")}),300),e.stopPropagation()}),(t=document.getElementById("popup-done"))&&(t.onclick=function(){var e=document.getElementById("popup-title"),t=document.getElementById("popup-editor");e&&e.value&&e.value.trim()||t&&t.innerText&&t.innerText.trim()?function(){var e=document.getElementById("popup-done");e&&(e.style.visibility="hidden");var t=document.getElementById("circle-loader");t&&(t.style.display="block"),r.f.sendMessage({action:a.a.GET_STATUS},(function(e){Object(o.q)(e)?h():(48==window.innerHeight&&p(),function(){var e=document.getElementById("login-option-wrap");if(e){var t=document.getElementById("login-overlay");t&&(t.style.display="block",t.onclick=function(){v()}),e.style.display="block";var n=document.getElementById("save-as");if(n){var i=function(){var e="",t="Untitled.txt",n=document.getElementById("popup-title");n&&(n.value&&n.value.trim()?(e+=n.value+"\n\n\n",t=n.value+".txt"):e+="Untitled\n\n\n");var r=document.getElementById("popup-editor");if(r)for(var o=r.childNodes,a=0;a<o.length;a++)o[a]&&(3===o[a].nodeType&&(e+=o[a].nodeValue+"\n"),1===o[a].nodeType&&(e+=o[a].innerText+"\n"));return[t,e+="\n"]}();n.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(i[1])),n.setAttribute("download",i[0]),n.onclick=function(){v(),m(),parent.postMessage("saveAsText","*")}}!function(){var e=document.getElementById("login-in");e&&(e.onclick=function(){if(Object(o.p)()){var e=document.getElementById("dc-option").classList;e.contains("show")?e.remove("show"):e.add("show")}else r.f.sendMessage({action:a.a.SIGN_IN,data:{TLD:".com"}},(function(e){Object(o.q)(e.code)&&h()}))});var t=document.getElementById("us-login");t&&(t.onclick=function(){r.f.sendMessage({action:a.a.SIGN_IN,data:{TLD:".com"}},(function(e){Object(o.q)(e.code)&&h()}))});var n=document.getElementById("china-login");n&&(n.onclick=function(){r.f.sendMessage({action:a.a.SIGN_IN,data:{TLD:".com.cn"}},(function(e){Object(o.q)(e.code)&&h()}))})}()}}());var t=document.getElementById("circle-loader");t&&(t.style.display="none");var n=document.getElementById("popup-done");n&&(n.style.visibility="initial")}))}():m()});var u=document.getElementById("popup-minimize");u&&(u.onclick=function(){window.innerHeight>60?function(){document.getElementById("popup-editor-wrap");var e=document.getElementById("popup-minimize");parent.postMessage("minimize","*"),e.classList.add("close");var t=document.getElementById("popup-header");t&&(t.style.borderBottom="none");var n=document.getElementById("popup-editor");n&&(n.style.display="none")}():p()})}();var f=window.addEventListener?"addEventListener":"attachEvent";function m(){document.getElementById("popup-editor-wrap").classList.remove("popup-editor-show"),parent.postMessage("hideBoxShadow","*"),setTimeout((function(){parent.postMessage("reduceSmartPopup","*"),document.getElementById("smart-popup").classList.remove("smart-popup-hide")}),300)}function g(e,t){m(),function(e,t){setTimeout((function(){document.getElementById("circle-loader-save").style.display="block"}),300);var n=document.getElementById("popup-title").value;""===n&&(n="Untitled");document.getElementById("popup-title").value="";var r=document.getElementById("popup-editor-wrap").style.backgroundColor;""===r&&(r="#ffffff");if(-1!==r.indexOf("rgb")){var o=r.substring(r.indexOf("(")+1,r.indexOf(")")).split(",");r=Object(i.b)(o[0],o[1],o[2])}var a=document.getElementById("popup-editor"),u="";a&&(u+=a.getAttribute("data-meeting")+a.innerHTML);a.innerHTML="",s.postMessage({tab_id:d,unsaved_textcard:{title:n,color:r,notebook_id:e,content:u,tags:t},save:!0})}(e,t)}function v(){var e=document.getElementById("login-option-wrap");if(e){e.style.display="none";var t=document.getElementById("login-overlay");t&&(t.style.display="none")}}function h(){48==window.innerHeight&&p();var e=document.getElementById("popup-wrap");if(e){e.appendChild(function(){var e=document.createDocumentFragment(),t=document.createElement("div");t.id="notebook-wrap";var n=document.createElement("div");n.id="choose-book-title",n.innerText="Choose a Notebook";var r=document.createElement("div");r.id="book-list-wrap";var o=document.createElement("div");o.id="book-list";var a=document.createElement("div");a.id="fresh-tag";var i=document.createElement("div");i.id="tag-wrap";var u=document.createElement("div");u.id="tag-editor",u.contentEditable=!0,u.innerText="";var c=document.createElement("div");return c.id="save-note",c.innerText="Save",r.appendChild(o),i.appendChild(u),t.appendChild(n),t.appendChild(r),i.prepend(a),t.appendChild(i),t.appendChild(c),e.appendChild(t),e}());var t=document.getElementById("notebook-wrap");if(t){var n=document.getElementById("tag-editor");setTimeout((function(){n.focus(),l(n)}),100),t.onclick=function(){setTimeout((function(){n.focus(),l(n)}),100)},x(!0),t.style.display="block",r.f.sendMessage({action:a.a.DOWNLOAD_BOOK_LIST},(function(e){var t=[];e&&(e=JSON.parse(e))&&Object(o.q)(e.code)&&(t=e.notebooks);var n=document.getElementById("book-list"),r=function(e){for(var t=document.createDocumentFragment(),n=0;n<e.length;n++){var r=document.createElement("div");r.innerText=e[n].name,r.classList.add("each-book"),r.id=e[n].notebook_id,t.appendChild(r)}return t}(t);n&&n.appendChild(r),n.querySelector(".each-book").appendChild(y()),x(!1)}));var i=document.getElementById("book-list");i&&(i.onclick=function(e){if(e.target.classList.contains("each-book")){var t=i.querySelector(".book-checked");t&&t.parentElement.removeChild(t),e.target.appendChild(y())}}),n&&(n.setAttribute("data-placeholder","Add Tags"),n.onkeydown=function(e){var t=e.keyCode;if(!(t<48||t>57&&t<65||t>90)||32===t||13===t||8===t)return!0;e.preventDefault()},n.onkeyup=function(e){var t=document.getElementById("notebook-wrap"),n=document.getElementById("tag-list");n&&t.removeChild(n);var i=e.target.innerText;if(i&&i.trim()){if(i=i.trim(),32===e.keyCode||13===e.keyCode)return E(i),b(),w(),void T();var u;i&&i.trim()&&(u=i,r.f.sendMessage({action:a.a.SEARCH_TAG,data:{tag:u}},(function(e){e&&(e=JSON.parse(e))&&Object(o.q)(e.code)&&function(e){for(var t=document.createDocumentFragment(),n=document.getElementById("tag-editor"),r=n.innerText,o=!1,a=0;a<e.length;a++)(i=document.createElement("div")).classList.add("saved-tag"),i.innerText=e[a].name,i.title=e[a].name,i.id=e[a].tag_id,(u=document.createElement("div")).classList.add("saved-tag-wrap"),u.appendChild(i),t.appendChild(u),r.toLowerCase()===e[a].name.toLowerCase()&&(o=!0);if(!o&&r&&r.trim()){var i,u,c=document.createElement("div");c.id="add-tag",c.innerText="+",(i=document.createElement("div")).id="new-tag",i.innerText=r,i.title=r,i.classList.add("saved-tag"),(u=document.createElement("div")).classList.add("saved-tag-wrap"),u.appendChild(i),t.prepend(u),t.prepend(c)}var s=document.createElement("div");s.id="tag-list",s.appendChild(t);var d=document.getElementById("notebook-wrap");if(d){var l=document.getElementById("tag-list");l&&d.removeChild(l);var p=s.querySelectorAll(".saved-tag-wrap");if(p){var f=-150;1===p.length?f=-48:2===p.length?f=-86:3===p.length&&(f=-124);var m=document.getElementById("tag-wrap");m&&m.clientHeight,s.style.top=f+"px"}d.appendChild(s),s.onclick=function(e){var t=e.target.innerText;if(t&&t.trim()&&"tag-list"!=e.target.id){if("new-tag"===e.target.id||e.target.querySelector("#new-tag"))return E(e.target.innerText),b(),w(),void T();for(var r=document.querySelectorAll(".to-save-tag"),o=0;o<r.length;o++)if(r[o].innerText.trim()===t.trim())return b(),w(),void T();var a=document.createElement("div");a.className="saved-tag to-save-tag",a.innerText=e.target.innerText,a.title=e.target.innerText,a.id=e.target.id;var i=document.createElement("div");i.id="remove-tag",i.classList.add("iclose"),a.appendChild(i);var u=document.getElementById("tag-wrap");u.insertBefore(a,n),a.onclick=function(e){"remove-tag"===e.target.id&&(u.removeChild(a),T(),e.stopPropagation())},b(),w(),T()}}}}(e.tags)})))}});var u=document.getElementById("save-note");u&&(u.onclick=function(e){var n=i.querySelector(".book-checked"),r=void 0;if(n){var o=n.parentElement;o&&(r=o.id)}for(var a=document.querySelectorAll(".to-save-tag"),u=[],c=0;c<a.length;c++)u.push({tagName:a[c].id.innerText,tag_id:a[c].id});g(r,u),t.style.display="none"})}}}function y(){var e=document.createElement("div");return e.classList.add("book-checked"),e}function b(){var e=document.getElementById("tag-list"),t=document.getElementById("notebook-wrap");e&&t&&t.removeChild(e)}function w(){var e=document.getElementById("tag-editor");e&&(e.innerText="")}function E(e){r.f.sendMessage({action:a.a.CREATE_TAG,data:{tag:e}},(function(e){e&&(e=JSON.parse(e))&&Object(o.q)(e.code)&&function(e){if(!e||!e.name)return;var t=document.createElement("div");t.className="saved-tag to-save-tag",t.innerText=e.name,t.title=e.name,t.id=e.tag_id;var n=document.createElement("div");n.id="remove-tag",n.classList.add("iclose"),t.appendChild(n);var r=document.getElementById("tag-wrap"),o=document.getElementById("tag-editor");r.insertBefore(t,o),t.onclick=function(e){"remove-tag"===e.target.id&&(r.removeChild(t),T(),e.stopPropagation())},T()}(e)}))}function T(){var e=document.getElementById("tag-wrap");if(e){var t=document.getElementById("book-list-wrap");if(t){var n=document.getElementById("tag-editor");e.clientHeight>60?(72===e.clientHeight||64===e.clientHeight||84===e.clientHeight||76===e.clientHeight?t.style.height="216px":t.style.height="180px",n.style.top="4px;",e.style.paddingBottom="12px"):(t.style.height="253px",e.style.paddingBottom="initial",document.querySelectorAll(".to-save-tag").length?n.style.top="4px":n.style.top="8px")}}}function x(e){var t=document.getElementById("loading-wrap");t&&(t.style.display=e?"block":"none")}(0,window[f])("attachEvent"===f?"onmessage":"message",(function(e){if(e.data){if("object"===u(e.data)){if("meetingSite"===e.data.action)switch(e.data.webapp){case"ZOHO_MEETING":c="Zoho Meeting";break;case"ZOHO_SHOWTIME":c="Zoho Showtime";break;case"ZOOM":c="Zoom";break;case"CISCO":c="Webex";break;case"GOTO_MEETING":c="Goto Meeting";break;case"BLUE_JEAN":c="BlueJean";break;case"HANGOUTS":c="Google Hangouts";break;case"GOOGLE_MEET":c="Google Meet"}return}switch(e.data){case"showEditor":document.getElementById("popup-editor-wrap").classList.add("popup-editor-show"),document.getElementById("smart-popup").classList.add("smart-popup-hide")}}}))}]);