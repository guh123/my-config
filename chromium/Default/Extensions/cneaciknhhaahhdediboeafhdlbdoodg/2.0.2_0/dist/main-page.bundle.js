!function(e){var n={};function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)t.d(r,o,function(n){return e[n]}.bind(null,o));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=14)}([function(e,n,t){"use strict";t.d(n,"e",(function(){return r})),t.d(n,"f",(function(){return o})),t.d(n,"g",(function(){return i})),t.d(n,"b",(function(){return a})),t.d(n,"a",(function(){return s})),t.d(n,"h",(function(){return c})),t.d(n,"c",(function(){return u})),t.d(n,"d",(function(){return l})),t.d(n,"i",(function(){return p}));chrome.extension,chrome.storage;var r=chrome.storage.local,o=chrome.runtime,i=chrome.tabs,a=chrome.browserAction,s=chrome.cookies,c=chrome.webNavigation,u=chrome.contextMenus,l=chrome.i18n,p=chrome.windows;chrome.webRequest},function(e,n,t){"use strict";t.d(n,"a",(function(){return c}));var r=t(7),o=t(2);function i(e,n,t,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void t(e)}s.done?n(c):Promise.resolve(c).then(r,o)}function a(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var a=e.apply(n,t);function s(e){i(a,r,o,s,c,"next",e)}function c(e){i(a,r,o,s,c,"throw",e)}s(void 0)}))}}function s(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var c=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e);var n=r.a.getDomain();this.urlPrefix="".concat(n,"/api/v1/"),this.accountPrefix="".concat(r.a.getAccountDomain(),"/"),this.noPrepend=!1,this.responseType=void 0}var n,t,i;return n=e,(t=[{key:"setNoPrepend",value:function(e){return this.noPrepend=e,this}},{key:"setResponseType",value:function(e){return this.responseType=e,this}},{key:"ajaxWithoutData",value:function(e,n,t,r){var i=this;return new Promise(function(){var s=a(regeneratorRuntime.mark((function a(s,c){var u,l;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return(u=new XMLHttpRequest).onload=function(){r||"blob"===this.responseType?s(this.response):s(this.responseText)},u.onerror=function(e){c(e)},u.open(e,i.prependUrl(n,t,r)),a.next=6,Object(o.c)("znbcsr");case 6:if(l=a.sent){a.next=10;break}return c(),a.abrupt("return");case 10:r&&(u.responseType="blob",u.setRequestHeader("processData",!1),u.setRequestHeader("contentType",!1)),i.responseType&&(u.responseType=i.responseType),u.setRequestHeader("X-ZCSRF-TOKEN","znbrcsr="+l.znbcsr),u.send();case 14:case"end":return a.stop()}}),a)})));return function(e,n){return s.apply(this,arguments)}}())}},{key:"ajaxWithData",value:function(e,n,t){var r=this;return new Promise(function(){var i=a(regeneratorRuntime.mark((function i(a,s){var c,u;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return(c=new XMLHttpRequest).onload=function(e){a(this.responseText)},c.onerror=function(e){s(e)},c.open(e,r.prependUrl(n)),i.next=6,Object(o.c)("znbcsr");case 6:if(u=i.sent){i.next=10;break}return s(),i.abrupt("return");case 10:c.setRequestHeader("X-ZCSRF-TOKEN","znbrcsr="+u.znbcsr),c.send(t);case 12:case"end":return i.stop()}}),i)})));return function(e,n){return i.apply(this,arguments)}}())}},{key:"prependUrl",value:function(e,n,t){return t||this.noPrepend?e:n?"".concat(this.accountPrefix).concat(e):"".concat(this.urlPrefix).concat(e)}}])&&s(n.prototype,t),i&&s(n,i),e}()},function(e,n,t){"use strict";t.d(n,"b",(function(){return o})),t.d(n,"c",(function(){return i})),t.d(n,"g",(function(){return a})),t.d(n,"d",(function(){return s})),t.d(n,"a",(function(){return c})),t.d(n,"e",(function(){return u})),t.d(n,"f",(function(){return l}));var r=t(0);function o(e){return new Promise((function(n,t){try{r.a.get(e,(function(e){n(e)}))}catch(e){n(void 0)}}))}function i(e){return new Promise((function(n,t){try{r.e.get(e,(function(e){n(e)}))}catch(e){n(void 0)}}))}function a(e){return new Promise((function(n,t){try{r.e.set(e,(function(){n(!0)}))}catch(e){n(!1)}}))}function s(e){return new Promise((function(n,t){try{r.e.remove(e,(function(){n(!0)}))}catch(e){n(!1)}}))}function c(e){return new Promise((function(n,t){try{r.i.create(e,(function(e){n(e)}))}catch(e){n(void 0)}}))}function u(e){return new Promise((function(n,t){try{r.f.sendMessage(e,(function(e){n(e)}))}catch(e){n(void 0)}}))}function l(e,n){return new Promise((function(t,o){try{r.g.sendMessage(e,n,(function(e){t(e)}))}catch(e){t(void 0)}}))}},function(e,n,t){"use strict";t.d(n,"a",(function(){return r}));var r={SEND_ANALYTICS:1e3,SIGN_IN:1001,USER_WINDOW:1002,DOWNLOAD_BOOK_LIST:1003,INIT_WINDOW:1004,GET_TAB_ID:1005,GET_DOCUMENT:1006,INIT_READER_VIEW:1007,DISPLAY_READER_FRAME:1008,GET_STATUS:1009,CREATE_TAG:1010,SEARCH_TAG:1011,SEND_FEEDBACK:1012,SIGN_OUT:1013,GET_ALL_TAGS:1014,SEARCH_TAG_FROM_LIST:1015,FETCH_ANNOUNCEMENT:1016,SHOW_MEETING_NOTE:1017,SAVE_MEETING_NOTE:1018,SHOW_RECIPE_POPUP:1019,CLOSE_RECIPE_POPUP:1020,SHOW_PDF_POPUP:1021,RESET_TOOLBAR_ICON:1022,SHOW_TOAST:1023,HIDE_TOAST:1024,GET_LOGIN_STATUS:1025,APP_LOADING:1026,PARTIAL_CAPTURE:1027,GET_USER_IMAGE:1028,PART_PAGE_SCREENSHOT:1029,FOCUSED_PAGE_SCREENSHOT:1030,GET_NB_DOMAIN:1031,PARTIAL_ANNOTATION_FUNC:1032,TAKE_SCREENSHOT:1033,GET_CURRENT_TAB:1034,SAVE_POSITION:1035,FETCH_NOTEBOOK_IMAGE:1036,FLUSH_CACHED_CARD:1037,FULL_PAGE_SCREENSHOT:1038,OPEN_ANNOTATOR:1039,SHOW_LOADING_IFRAME:1040,HIDE_LOADING_IFRAME:1041,DOWNLOAD_FROM_URL:1042}},function(e,n,t){"use strict";function r(e,n){return function(e,n){var t=e.getDate(),r=e.getMonth(),i=r+1,a=e.getFullYear(),s=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][r],c=e.getHours(),u=e.getMinutes(),l=e.getSeconds(),p="AM";c>=12&&(p="PM");c>12&&(c-=12);switch(n){case"dd-MMM, yyyy":return o(t)+"-"+s+", "+a;case"YYYY-MM-DDTHH:mm:SS+0530":return a+"-"+o(i)+"-"+o(t)+"T"+o(c)+":"+o(u)+":"+o(l)+"+0530";case"YYYY-MM-DDTHH:mm:SS+0000":return a+"-"+o(i)+"-"+o(t)+"T"+o(c)+":"+o(u)+":"+o(l)+"+0000";case"dd/MM/YYYY":return o(t)+"/"+o(i)+"/"+a;case"HH:mm:SS":return o(c)+":"+o(u)+":"+o(l);case"HH:mm M, MMM dd, yyyy":return o(c)+":"+o(u)+" "+p+", "+s+" "+o(t)+", "+a;default:return t+" "+s+" "+a}}(new Date(e),n)}function o(e){return e<10?"0"+e:""+e}t.d(n,"a",(function(){return r})),t.d(n,"b",(function(){return o}))},function(e,n,t){"use strict";t.d(n,"j",(function(){return l})),t.d(n,"e",(function(){return p})),t.d(n,"p",(function(){return d})),t.d(n,"u",(function(){return f})),t.d(n,"t",(function(){return h})),t.d(n,"l",(function(){return m})),t.d(n,"r",(function(){return v})),t.d(n,"q",(function(){return g})),t.d(n,"g",(function(){return b})),t.d(n,"s",(function(){return w})),t.d(n,"k",(function(){return y})),t.d(n,"m",(function(){return x})),t.d(n,"y",(function(){return S})),t.d(n,"f",(function(){return E})),t.d(n,"o",(function(){return k})),t.d(n,"w",(function(){return O})),t.d(n,"c",(function(){return T})),t.d(n,"h",(function(){return _})),t.d(n,"v",(function(){return P})),t.d(n,"x",(function(){return R})),t.d(n,"z",(function(){return A})),t.d(n,"a",(function(){return N})),t.d(n,"i",(function(){return M})),t.d(n,"d",(function(){return C})),t.d(n,"b",(function(){return D})),t.d(n,"n",(function(){return L}));var r=t(2),o=t(3),i=t(0),a=t(4),s=t(8);t(9);function c(e,n,t,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void t(e)}s.done?n(c):Promise.resolve(c).then(r,o)}function u(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var i=e.apply(n,t);function a(e){c(i,r,o,a,s,"next",e)}function s(e){c(i,r,o,a,s,"throw",e)}a(void 0)}))}}function l(){var e,n,t=navigator.userAgent,r=(navigator.appName,""+parseFloat(navigator.appVersion)),o=parseInt(navigator.appVersion,10);-1!=(e=t.indexOf("Chrome"))?("Chrome",r=t.substring(e+7)):t.lastIndexOf(" ")+1<(e=t.lastIndexOf("/"))&&(r=t.substring(e+1)),-1!=(n=r.indexOf(";"))&&(r=r.substring(0,n)),-1!=(n=r.indexOf(" "))&&(r=r.substring(0,n)),o=parseInt(""+r,10),isNaN(o)&&(r=""+parseFloat(navigator.appVersion),o=parseInt(navigator.appVersion,10));var a={platformVersion:r,deviceName:navigator.userAgent,deviceType:"Web"},s=i.f.getManifest().version;return a.appVersion=s,a.appName="Chrome Extension - "+s,a.platformName="Chrome",a}function p(){return(new Date).getTime()}function d(){var e=navigator.language;return"zh"===e||"zh-CN"===e||"zh-TW"===e}function f(e,n){document.createElement(e).constructor===HTMLElement&&customElements.define(e,n)}function h(e){return new Promise((function(n,t){for(var r=[],o=0,i=0;i<e.length;i++){var a=new FileReader;a.onload=s,a.readAsDataURL(e[i])}function s(){r.push(this.result),++o===e.length&&n(r)}}))}function m(){return new Promise(function(){var e=u(regeneratorRuntime.mark((function e(n,t){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(r.c)("notebookList");case 2:(a=e.sent)&&a.length||i.f.sendMessage({action:o.a.DOWNLOAD_BOOK_LIST},(function(e){var t=[];e&&(e=JSON.parse(e))&&g(e.code)&&(t=e.notebooks),n(t)}));case 4:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}())}function v(e){return new Promise((function(n,t){if(fileMap[e])n(!0);else{var r=document.createElement("script");document.head.appendChild(r),r.onload=function(){fileMap[e]=!0,n(!0)},r.onerror=function(){t(!1)},r.src=e}}))}function g(e){return 200===e||201===e}function b(e){e&&(e.focus(),e.innerText&&w(e))}function w(e){var n,t;document.createRange?((n=document.createRange()).selectNodeContents(e),n.collapse(!1),(t=window.getSelection()).removeAllRanges(),t.addRange(n)):document.selection&&((n=document.body.createTextRange()).moveToElementText(e),n.collapse(!1),n.select())}function y(){var e,n,t,r,o=new Date;return o.getFullYear()+"-"+Object(a.b)(o.getMonth()+1)+"-"+Object(a.b)(o.getDate())+"T"+(Object(a.b)(o.getHours())+":"+Object(a.b)(o.getMinutes())+":"+Object(a.b)(o.getSeconds()))+(e=o.getTimezoneOffset()/60,n=e<0?"+":"-",t=Math.floor(Math.abs(e)),r=Math.floor(60*Math.abs(e)%60),n+Object(a.b)(t)+""+Object(a.b)(r))}function x(){return new Promise(function(){var e=u(regeneratorRuntime.mark((function e(n,t){var o,i,a,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(r.c)("userprofile");case 2:o=e.sent,i=void 0,o&&(i=o.userprofile)&&i.default_notecard_color&&"random"!==i.default_notecard_color.toLowerCase()&&n(i.default_notecard_color),s=(a=["#FFB47A","#FFEE8A","#FFC96C","#FFFFFF","#FF9575","#FF8785","#E9FF9D","#B3FFE8","#83D2FF","#CDC2FF","#F9D3FF","#D9E8F0"]).length,0,n(a[Math.floor(Math.random()*(s-0)+0)]);case 9:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}())}function S(e){if(-1!==e.indexOf("rgb")){var n=(e=e.substring(e.indexOf("(")+1,e.indexOf(")"))).split(",");return"#"+(16777216+(n[2]|n[1]<<8|n[0]<<16)).toString(16).slice(1)}return e}function E(e){for(var n=e.split(","),t=n[0].match(/:(.*?);/)[1],r=atob(n[1]),o=r.length,i=new Uint8Array(o);o--;)i[o]=r.charCodeAt(o);return new Blob([i],{type:t})}function k(e,n){for(var t=0;t<e.length;t++){var r=e[t];r.is_read=!1;for(var o=0;o<n.length;o++){var i=n[o];if(i.announcement_id===r.announcement_id){r.is_read=i.is_read;break}}}return e}function O(e,n,t){return e?(e=(e=(e=(e=e.replace(/<article/g,"<div").replace(/<\/article>/g,"</div>")).replace(/<main/g,"<div").replace(/<\/main>/g,"</div>")).replace(/<section/g,"<div").replace(/<\/section>/g,"</div>")).replace(/<br>/g,"<br/>").replace(/<hr>/g,"<hr/>"),"true"===n&&function(e){e=Object(s.a)(e)}(e),e=(e=e.replace(/[\u2028\u2029]/gim,"<br />")).replace(/[\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/gim,""),"true"===t&&(e=e.replace(/"/g,"\\'")),e):e}function T(){return new Promise(function(){var e=u(regeneratorRuntime.mark((function e(n,t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(r.d)("znbcsr");case 2:n(!0);case 3:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}())}function _(e){if(e&&e.length){for(var n=document.createDocumentFragment(),t=0;t<e.length;t++){var r=document.createElement("div");r.id=e[t].notebook_id,r.classList.add("each-book"),r.innerText=e[t].name,n.appendChild(r)}return n}}function P(e,n){for(var t=(new DOMParser).parseFromString(e,"text/html"),r=t.querySelectorAll("script"),o=0;o<r.length;o++)r[o].parentElement.removeChild(r[o]);for(var i=t.querySelectorAll("iframe"),a=0;a<i.length;a++)i[a].parentElement.removeChild(i[a]);for(var s=t.querySelectorAll("style"),c=0;c<s.length;c++)s[c].parentElement.removeChild(s[c]);for(var u=t.querySelectorAll("button"),l=0;l<u.length;l++)u[l].parentElement.removeChild(u[l]);for(var p=t.querySelectorAll("input"),d=0;d<p.length;d++)p[d].parentElement.removeChild(p[d]);for(var f=t.querySelectorAll("textarea"),h=0;h<f.length;h++)f[h].parentElement.removeChild(f[h]);for(var m=t.querySelectorAll(".clipper-space"),v=0;v<m.length;v++){var g=document.createElement("div");g.innerHTML=m[v].innerHTML,m[v].parentElement.appendChild(g),m[v].parentElement.removeChild(m[v])}if(!n){for(var b=t.querySelectorAll("image-view"),w=0;w<b.length;w++)b[w].parentElement.removeChild(b[w]);for(var y=t.querySelectorAll("p"),x=0;x<y.length;x++)y[x].innerText&&y[x].innerText.trim()||y[x].querySelector("img")||y[x].parentElement.removeChild(y[x]);for(var S=t.querySelectorAll("br"),E=0;E<S.length;E++)S[E].innerText&&S[E].innerText.trim()||S[E].querySelector("img")||S[E].parentElement.removeChild(S[E]);for(var k=t.querySelectorAll("div"),O=0;O<k.length;O++)k[O].innerText&&k[O].innerText.trim()||k[O].querySelector("img")||k[O].parentElement.removeChild(k[O])}return t.body.innerHTML}function R(e){for(var n=(new DOMParser).parseFromString(e,"text/html"),t=n.querySelectorAll("image-view"),r=0;r<t.length;r++){var o=document.createTextNode("-()-");t[r].parentElement.replaceChild(o,t[r])}return"undefined"===n.body.innerHTML?"":n.body.innerHTML}function A(e,n){return new Promise(function(){var t=u(regeneratorRuntime.mark((function t(o,i){var a,s,c,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(r.c)("analyticsShown");case 2:for(a=t.sent,c=!0,a&&a.analyticsShown?s=a.analyticsShown:(s="[]",c=!0),s=JSON.parse(s),u=0;u<s.length;u++)s[u].zuid===n&&(s[u].shown=e,c=!1);return c&&s.push({shown:e,zuid:n}),t.next=10,Object(r.g)({analyticsShown:JSON.stringify(s)});case 10:o(!0);case 11:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())}function N(e){return new Promise(function(){var n=u(regeneratorRuntime.mark((function n(t,o){var i,a,s;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(r.c)("analyticsShown");case 2:i=n.sent,a=i&&i.analyticsShown?i.analyticsShown:"[]",a=JSON.parse(a),s=0;case 6:if(!(s<a.length)){n.next=13;break}if(a[s].zuid!==e){n.next=10;break}return t(!1),n.abrupt("return");case 10:s++,n.next=6;break;case 13:t(!0);case 14:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())}function M(e){return new Promise(function(){var n=u(regeneratorRuntime.mark((function n(t,o){var i,a,s;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(r.c)("analyticsShown");case 2:i=n.sent,a=i&&i.analyticsShown?i.analyticsShown:"[]",a=JSON.parse(a),s=0;case 6:if(!(s<a.length)){n.next=13;break}if(a[s].zuid!==e){n.next=10;break}return t(a[s].shown),n.abrupt("return");case 10:s++,n.next=6;break;case 13:t(!1);case 14:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())}function C(e){return new Promise((function(n,t){var r=e.querySelectorAll("img");if(r&&r.length)for(var a=function(e){var t=r[e].src;if(!t)return"continue";i.f.sendMessage({action:o.a.DOWNLOAD_FROM_URL,data:{url:t}},(function(t){var o=document.createElement("image-view");o.setAttribute("image-data",t),o.setAttribute("dont_load_annotator",!0),o.id="image-view_"+p();var i=document.createElement("div"),a=document.createElement("div");a.innerHTML="<div class='clipper-space'><br></div>",i.appendChild(a),i.appendChild(o);var s=document.createElement("div");s.innerHTML="<div class='clipper-space'><br></div>",i.appendChild(s);var c=r[e].parentElement;c.removeChild(r[e]),c.appendChild(i),n(!0)}))},s=0;s<r.length;s++)a(s)}))}function D(e){for(var n=(new DOMParser).parseFromString(e,"text/html"),t=n.querySelectorAll("img"),r=0;r<t.length;r++)if(t[r].src&&-1===t[r].src.indexOf("http"))if(-1!==t[r].src.indexOf("moz-extension://")||-1!==t[r].src.indexOf("chrome-extension://")){var o=new URL(t[r].src);t[r].src=currentTab.url+o.pathname}else t[r].src=currentTab.url+t[r].src;return n.body.innerHTML}function L(e){if(!e||!e.trim())return"#212121";var n,t,r;if(e.match(/#/))n=function(e){return e=F(e),parseInt(e.substring(0,2),16)}(e),t=function(e){return e=F(e),parseInt(e.substring(2,4),16)}(e),r=function(e){return e=F(e),parseInt(e.substring(4,6),16)}(e);else{var o=e.substring(e.indexOf("(")+1,e.lastIndexOf(")")).split(/,\s*/);n=o[0],t=o[1],r=o[2]}return Math.round((299*parseInt(n)+587*parseInt(t)+114*parseInt(r))/1e3)>125?"#212121":"#FFFFFF"}function F(e){return"#"===e.charAt(0)?e.substring(1,7):e}},function(e,n,t){"use strict";function r(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}t.d(n,"a",(function(){return o}));var o=new(function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.eventListeners={}}var n,t,o;return n=e,(t=[{key:"addListener",value:function(e,n,t,r){if(n){var o=this.eventListeners[e];o||(this.eventListeners[e]=[],o=this.eventListeners[e]),o.push({element:n,type:t,func:r}),n.addEventListener(t,r)}}},{key:"clearAllListeners",value:function(e){var n=this.eventListeners[e];if(n)for(;n.length;){var t=n.pop();t&&t.element&&t.element.removeEventListener(t.type,t.func)}}}])&&r(n.prototype,t),o&&r(n,o),e}())},function(e,n,t){"use strict";function r(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}t.d(n,"a",(function(){return o}));var o=new(function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.setup="https://notebook.zoho",this.accountsSetup="https://accounts.zoho",this.topLevelDomain=".com"}var n,t,o;return n=e,(t=[{key:"setSetup",value:function(e){return this.setup=e,this}},{key:"setTopLevelDomain",value:function(e){return this.topLevelDomain=e,this}},{key:"getTopLevelDomain",value:function(){return this.topLevelDomain}},{key:"getAccountsSetup",value:function(){return this.accountsSetup}},{key:"getSetup",value:function(){return this.setup}},{key:"getDomain",value:function(){return this.setup+""+this.topLevelDomain}},{key:"getAccountDomain",value:function(){return this.accountsSetup+""+this.topLevelDomain}}])&&r(n.prototype,t),o&&r(n,o),e}())},function(e,n,t){"use strict";t.d(n,"a",(function(){return i}));var r={elements:["a","b","br","caption","cite","code","col","colgroup","dd","dl","dt","em","h1","h2","h3","h4","h5","h6","i","img","li","ol","p","q","small","strike","strong","sub","sup","table","tbody","td","tfoot","th","thead","tr","u","ul","div","span","figure","article","section"],attributes:{a:["href"],img:["type","height","src","width","duration","class","remotesrc","org-width","org-height","consumers","local-id"],col:["span","width"],colgroup:["span","width"],ol:["start","type"],q:["cite"],table:["summary","width"],td:["abbr","axis","colspan","rowspan","width"],th:["abbr","axis","colspan","rowspan","scope","width"],ul:["type"]},protocols:{a:{href:["http","https","mailto","tel"]},img:{src:["http","https","zresource"]}}};function o(e){for(var n=e.getElementsByTagName("style"),t=0;t<n.length;t++)n[t].parentNode.removeChild(n[t]);return e}function i(e){var n=document.createElement("div");n.innerHTML=e,n=o(n);var t=new Sanitize(r).clean_node(n),i=document.createElement("div");i.appendChild(t.cloneNode(!0));var a=i.innerHTML;return a=(a=a.replace(/[\u2028\u2029]/gim,"<br />")).replace(/[\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/gim,"")}},function(e,n,t){"use strict";t.d(n,"e",(function(){return u})),t.d(n,"k",(function(){return l})),t.d(n,"j",(function(){return p})),t.d(n,"a",(function(){return d})),t.d(n,"b",(function(){return f})),t.d(n,"o",(function(){return h})),t.d(n,"l",(function(){return m})),t.d(n,"c",(function(){return v})),t.d(n,"n",(function(){return g})),t.d(n,"q",(function(){return b})),t.d(n,"r",(function(){return w})),t.d(n,"p",(function(){return y})),t.d(n,"g",(function(){return x})),t.d(n,"m",(function(){return S})),t.d(n,"h",(function(){return E})),t.d(n,"i",(function(){return T})),t.d(n,"d",(function(){return _})),t.d(n,"f",(function(){return P}));var r=t(1),o=t(5),i=t(7),a=t(2);function s(e,n,t,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void t(e)}s.done?n(c):Promise.resolve(c).then(r,o)}function c(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var i=e.apply(n,t);function a(e){s(i,r,o,a,c,"next",e)}function c(e){s(i,r,o,a,c,"throw",e)}a(void 0)}))}}function u(){return(new r.a).ajaxWithoutData("GET","notebooks?sort_column=-Notebook.LastModifiedTime&offset=0&limit=100")}function l(){return new Promise(function(){var e=c(regeneratorRuntime.mark((function e(n,t){var o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=new r.a,e.next=3,o.ajaxWithoutData("GET","userprofile/accounts/status");case 3:i=e.sent,n(i);case 5:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}())}function p(){return new Promise(function(){var e=c(regeneratorRuntime.mark((function e(n,t){var o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=new r.a,e.next=3,o.ajaxWithoutData("GET","userprofile");case 3:i=e.sent,n(i);case 5:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}())}function d(e){return new Promise(function(){var n=c(regeneratorRuntime.mark((function n(t,o){var i,a,s,c,u,l;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("note/file"!==e.type){n.next=10;break}return n.next=3,k(e.fileUrl);case 3:return i=n.sent,n.next=6,O(e.notebook_id,i,"");case 6:a=n.sent,t(a),n.next=19;break;case 10:return s=new r.a,(c=new FormData).append("attachment",e.znml),u="notebooks/".concat(e.notebook_id,"/notecards"),e.notebook_id&&"undefined"!==e.notebook_id||(u="notecards"),n.next=17,s.ajaxWithData("POST",u,c);case 17:l=n.sent,t(l);case 19:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())}function f(e,n,t,i){return new Promise(function(){var a=c(regeneratorRuntime.mark((function a(s,c){var u,l,p,d,f;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return u=new r.a,l=Object(o.f)(t),(p=new FormData).append("attachment",l,i),d="notebooks/".concat(e,"/notecards/").concat(n,"/resources"),a.next=7,u.ajaxWithData("POST",d,p);case 7:f=a.sent,s(f);case 9:case"end":return a.stop()}}),a)})));return function(e,n){return a.apply(this,arguments)}}())}function h(e,n,t){return new Promise(function(){var o=c(regeneratorRuntime.mark((function o(i,a){var s,c,u,l;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return s=new r.a,(c=new FormData).append("JSONString",JSON.stringify({reminders:[{type:"reminder/time",reminder_time:t,created_time:(new Date).getTime()}]})),u="notebooks/".concat(e,"/notecards/").concat(n,"/reminders"),o.next=6,s.ajaxWithData("POST",u,c);case 6:l=o.sent,i(l);case 8:case"end":return o.stop()}}),o)})));return function(e,n){return o.apply(this,arguments)}}())}function m(e){return new Promise(function(){var n=c(regeneratorRuntime.mark((function n(t,o){var i,a,s;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=new r.a,a="tags/search?query=".concat(e,"&limit=5"),n.next=4,i.ajaxWithData("GET",a);case 4:s=n.sent,t(s);case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())}function v(e,n){return new Promise(function(){var t=c(regeneratorRuntime.mark((function t(o,i){var a,s,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=new r.a,"tags",(s=new FormData).append("JSONString",JSON.stringify({name:e,created_time:(new Date).getTime(),resource_id:n})),t.next=6,a.ajaxWithData("POST","tags",s);case 6:c=t.sent,o(c);case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())}function g(e){var n=e.sender,t=e.content,i=e.base64,a=e.imageName;return new Promise(function(){var e=c(regeneratorRuntime.mark((function e(s,c){var u,l,p,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=new r.a,"feedback",l=new FormData,i&&(p=Object(o.f)(i),l.append("attachment",p,a)),"Notebook - Chrome Extension Feedback",l.append("JSONString",JSON.stringify({subject:"Notebook - Chrome Extension Feedback",sender:n,content:t})),e.next=8,u.ajaxWithData("POST","feedback",l);case 8:d=e.sent,s(d);case 10:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}())}function b(){return new Promise(function(){var e=c(regeneratorRuntime.mark((function e(n,t){var o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=new r.a,"logout",e.next=4,o.ajaxWithoutData("GET","logout",!0);case 4:i=e.sent,n(i);case 6:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}())}function w(e,n,t){return new Promise(function(){var o=c(regeneratorRuntime.mark((function o(i,a){var s,c,u,l;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return s=new r.a,c="notebooks/".concat(e,"/notecards/").concat(n),(u=new FormData).append("attachment",t),o.next=6,s.ajaxWithData("PUT",c,u);case 6:l=o.sent,i(l);case 8:case"end":return o.stop()}}),o)})));return function(e,n){return o.apply(this,arguments)}}())}function y(e,n,t){return new Promise(function(){var o=c(regeneratorRuntime.mark((function o(i,a){var s,c,u,l,p,d;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:for(s=[],c=0;c<t.length;c++)s.push(t[c].tag_id);return u=new r.a,l="notebooks/".concat(e,"/notecards/").concat(n,"/tags"),(p=new FormData).append("JSONString",JSON.stringify({tag_ids:s})),o.next=8,u.ajaxWithData("PUT",l,p);case 8:d=o.sent,i(d);case 10:case"end":return o.stop()}}),o)})));return function(e,n){return o.apply(this,arguments)}}())}function x(){return new Promise(function(){var e=c(regeneratorRuntime.mark((function e(n,t){var o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=new r.a,"tags?offset=0&limit=1000",e.next=4,o.ajaxWithData("GET","tags?offset=0&limit=1000");case 4:i=e.sent,n(i);case 6:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}())}function S(e,n){return new Promise((function(t,r){var o=[];n=n.toLowerCase(),e.map((function(e){e.name.toLowerCase().startsWith(n)&&o.push(e)})),t(JSON.stringify({code:200,tags:o}))}))}function E(){return new Promise(function(){var e=c(regeneratorRuntime.mark((function e(n,t){var r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"chromeClipper",(r=new XMLHttpRequest).onload=function(){n(this.responseText)},r.onerror=function(e){t(e)},r.open("GET","https://notebook.zoho.com/api/v1/announcements?last_announcement_time=1&platform=chromeClipper"),e.next=7,Object(a.c)("znbcsr");case 7:if(o=e.sent){e.next=11;break}return t(),e.abrupt("return");case 11:r.setRequestHeader("X-ZCSRF-TOKEN","znbrcsr="+o.znbcsr),r.send();case 13:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}())}function k(e){return new Promise(function(){var n=c(regeneratorRuntime.mark((function n(t,o){var i,a;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=new r.a,n.next=3,i.ajaxWithoutData("GET",e,!1,!0);case 3:a=n.sent,t(a);case 5:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())}function O(e,n,t){return new Promise(function(){var o=c(regeneratorRuntime.mark((function o(i,a){var s,c,u,l;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return s=new r.a,c=new FormData,u={name:"Untitled.pdf",notecard_name:"Untitled"},e&&"undefined"!==e&&(u.notebook_id=e),c.append("attachment",n,t||"Untitled.pdf"),c.append("JSONString",JSON.stringify(u)),"cards/file",o.next=9,s.ajaxWithData("POST","cards/file",c);case 9:l=o.sent,i(l);case 11:case"end":return o.stop()}}),o)})));return function(e,n){return o.apply(this,arguments)}}())}function T(){return new Promise(function(){var e=c(regeneratorRuntime.mark((function e(n,t){var o,s,c,u,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(o=new r.a).setNoPrepend(!0),o.setResponseType("blob"),s=i.a.getTopLevelDomain(),e.next=6,Object(a.c)("userprofile");case 6:if((c=e.sent)&&c.userprofile){e.next=10;break}return n(void 0),e.abrupt("return");case 10:return u="https://contacts.zoho".concat(s,"/file?t=user&ID=").concat(c.userprofile.zuid,"&fs=thumb"),e.next=13,o.ajaxWithoutData("GET",u);case 13:l=e.sent,n(l);case 15:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}())}function _(e){return new Promise(function(){var n=c(regeneratorRuntime.mark((function n(t,o){var i,a;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return(i=new r.a).setResponseType("blob"),n.next=4,i.ajaxWithoutData("GET","covers/".concat(e,"/thumbnail?size=m"));case 4:a=n.sent,t(a);case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())}function P(e){return new Promise(function(){var n=c(regeneratorRuntime.mark((function n(t,o){var s,c,u;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return(s=new r.a).setNoPrepend(!0),s.setResponseType("blob"),i.a.getTopLevelDomain(),n.next=6,Object(a.c)("userprofile");case 6:if((c=n.sent)&&c.userprofile){n.next=10;break}return t(void 0),n.abrupt("return");case 10:return n.next=12,s.ajaxWithoutData("GET",e);case 12:u=n.sent,t(u);case 14:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())}},,,,,function(e,n,t){"use strict";t.r(n),t.d(n,"default",(function(){return y}));var r=t(6),o=t(5),i=t(2),a=t(0),s=t(3),c=t(8);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,n,t,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void t(e)}s.done?n(c):Promise.resolve(c).then(r,o)}function p(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var i=e.apply(n,t);function a(e){l(i,r,o,a,s,"next",e)}function s(e){l(i,r,o,a,s,"throw",e)}a(void 0)}))}}function d(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,n){return!n||"object"!==u(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function h(e){var n="function"==typeof Map?new Map:void 0;return(h=function(e){if(null===e||(t=e,-1===Function.toString.call(t).indexOf("[native code]")))return e;var t;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(e))return n.get(e);n.set(e,r)}function r(){return m(e,arguments,b(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),g(r,e)})(e)}function m(e,n,t){return(m=v()?Reflect.construct:function(e,n,t){var r=[null];r.push.apply(r,n);var o=new(Function.bind.apply(e,r));return t&&g(o,t.prototype),o}).apply(null,arguments)}function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function g(e,n){return(g=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var w=document.createElement("template");w.innerHTML='<style>\n    #main-page-wrap {\n        position: absolute;\n        top: 0;\n        bottom: 0;\n        left: 0;\n        right: 0;\n        padding: 0 22px;\n        background-color: #f3f3f3;\n    }\n\n    #onboard-header {\n        position: relative;\n        height: 46px;\n        margin: 12px 0px;\n    }\n\n    #onboard-header .inotebook.align {\n        position: absolute;\n        top: 0;\n        bottom: 0;\n        width: 24px;\n        height: 24px;\n        margin: auto;\n    }\n\n    #onboard-title {\n        position: absolute;\n        left: 32px;\n        top: 11px;\n        font-size: 18px;\n        bottom: 5px;\n    }\n    \n    #onboard-header .isettings.align {\n        position: absolute;\n        top: 0;\n        bottom: 0;\n        right: 34px;\n        margin: auto;\n        height: 24px;\n        cursor: pointer;\n    }\n\n    #nb-settings.highlight {\n        background-color: rgba(0, 0, 0, 0.2);\n        border-radius: 4px;\n    }\n\n    .mp-option {\n        position: relative;\n        height: 42px;\n        background-color: white;\n        border-radius: 4px;\n        margin: 23px 0;\n        cursor: pointer;\n        -webkit-transition: all 0.3s linear;\n        -moz-transition: all 0.3s linear;\n        -o-transition: all 0.3s linear;\n        transition: all 0.3s linear;\n    }\n\n    .mp-option:hover {\n        transform: translateY(-1px);\n        -webkit-box-shadow: -2px 11px 16px 7px rgba(0, 0, 0, 0.040);\n        -moz-box-shadow: -2px 11px 16px 7px rgba(0, 0, 0, 0.040);\n        box-shadow: -2px 11px 16px 7px rgba(0, 0, 0, 0.040);\n    }\n\n    .mp-option-text {\n        position: relative;\n        line-height: 42px;\n        height: 42px;\n        font-size: 15px;\n        display: inline-block;\n        vertical-align: middle;\n    }\n\n    .mp-option-align {\n        position: relative;\n        width: 14px;\n        display: inline-block;\n        vertical-align: middle;\n        margin: 0 20px;\n    }\n\n    #mp-write-notes {\n        position: relative;\n        height: 82px;\n        border-radius: 8px;\n        background-color: #e9e9e9;\n        outline: none;\n        cursor: pointer;\n        border: 1px solid rgba(0, 0, 0, 0.025)\n        -webkit-transition: all 0.3s linear;\n        -moz-transition: all 0.3s linear;\n        -o-transition: all 0.3s linear;\n        transition: all 0.3s linear;\n    }\n\n    #mp-write-notes:hover {\n        background-color: #e3e3e3;\n    }\n\n    #mp-placeholder {\n        color: #808080;\n        font-size: 14px;\n        padding: 12px;\n    }\n\n    #mp-save-image {\n        position: relative;\n        padding: 14px 0;\n        width: 100%;\n        margin: 22px 0px;\n        border-radius: 4px;\n        text-align: center;\n        -webkit-transition: all 0.3s linear;\n        -moz-transition: all 0.3s linear;\n        -o-transition: all 0.3s linear;\n        transition: all 0.3s linear;\n        cursor: pointer;\n        background-image: url("data:image/svg+xml,%3csvg width=\'100%25\' height=\'100%25\' xmlns=\'http://www.w3.org/2000/svg\'%3e%3crect width=\'100%25\' height=\'100%25\' fill=\'none\' stroke=\'rgb(185, 185, 185)\' stroke-width=\'3\' stroke-dasharray=\'6%2c 9\' stroke-dashoffset=\'0\' stroke-linecap=\'square\'/%3e%3c/svg%3e");\n    }\n\n    #view-all-wrap {\n        position: absolute;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        padding: 0 22px;\n        height: 48px;\n        border-top: 1px solid rgba(0, 0, 0, 0.08);\n        cursor: pointer;\n    }\n\n    #view-all {\n        font-size: 14px;\n        height: 48px;\n        position: relative;\n        line-height: 48px;\n        color: #292929;\n    }\n\n    .iadd-photo.mp-align {\n        position: relative;\n        vertical-align: middle;\n        display: inline-block;\n    }\n\n    #add-photo {\n        position: relative;\n        margin-left: 6px;\n        font-size: 14px;\n        vertical-align: middle;\n        display: inline-block;\n    }\n\n    #mp-drag-drop {\n        color: #808080;\n        font-size: 14px;\n        padding-top: 3px;\n    }\n\n    #note-title::-moz-selection {\n        color: #FFFFFF;\n        background-color: #000000;\n    }\n\n    #note-title::selection {\n        color: #FFFFFF;\n        background-color: #000000;\n    }\n\n    #nb-announcement {\n        position: absolute;\n        top: -2px;\n        bottom: 0;\n        right: 70px;\n        margin: auto;\n        width: 20px;\n        height: 20px;\n        cursor: pointer;\n        background-size: contain;\n    }\n\n    #close-app {\n        position: absolute;\n        width: 24px;\n        height: 24px;\n        right: 0px;\n        top: 10px;\n        cursor: pointer;\n    }\n\n    .iview-all.align {\n        position: absolute;\n        top: 8px;\n        right: 14px;\n    }\n\n    #toast-message {\n        position: absolute;\n        left: -4px;\n        right: -4px;\n        bottom: 4px;\n        height: 40px;\n        line-height: 40px;\n        text-align: center;\n        background-color: #212121;\n        color: #FFFFFF;\n        font-size: 14px;\n        margin: 0 26px;\n        border-radius: 3px;\n        -webkit-transition: all 0.3s linear;\n        -moz-transition: all 0.3s linear;\n        -o-transition: all 0.3s linear;\n        transition: all 0.3s linear;\n    }\n\n    #toast-message.hide {\n        bottom: -100px;\n    }\n\n    #toast-message.show {\n        bottom: 0px;\n    }\n\n    .mp-option-more {\n        position: absolute;\n        top: 0px;\n        right: 0px;\n        max-width: 12px;\n        padding: 15px 16px;\n        border-left: 1px solid rgba(0,0,0,0.15);\n        border-radius: 0 4px 4px 0;\n    }\n\n    #screenshot-options-wrap {\n        position: absolute;\n        top: 189px;\n        left: 22px;\n        right: 22px;\n        z-index: 11;\n        font-size: 15px;\n        background-color: #FFFFFF;\n        border-radius: 4px;\n        box-shadow: 16px 19px 16px 7px rgba(0, 0, 0, 0.078);\n        display: none;\n    }\n\n    #screenshot-options-wrap.editor-screenshot {\n        top: 304px;\n        left: 12px;\n        width: 210px;\n        color: #212121;\n        padding: 6px 0px;\n    }\n    \n    .screenshot-options {\n        padding: 14px 22px 8px 22px;\n        cursor: pointer;\n    }\n\n    .screenshot-options:hover {\n        color: #3B9EFF;\n    }\n\n    #screenshot-overlay {\n        position: absolute;\n        top: 0;\n        bottom: 0;\n        right: 0;\n        left: 0;\n        z-index: 2;\n        display: none;\n    }\n\n    #view-it {\n        color: inherit;\n        text-decoration: none;\n    }\n\n    #reminder.highlight,\n    #tag.highlight {\n        background-color: rgba(0,0,0,0.2);\n        border-radius: 4px;\n    }\n\n    #red-dot {\n        position: absolute;\n        width: 6px;\n        height: 6px;\n        border-radius: 50%;\n        background-color: red;\n        top: -3px;\n        right: 3px;\n        display: none;\n    }\n\n    \n\n</style>\n\n<div id="main-page-wrap">\n    <div id="onboard-header">\n        <div class="inotebook align"></div>\n        <div id="onboard-title">Notebook</div>\n        <div id="nb-announcement" title="Announcements" class="inotifi-topbar">\n            <div id="red-dot">\n            </div>\n        </div>\n        <div id="nb-settings" class="isettings align"></div>\n        <div id="close-app" class="iclose"></div>\n    </div>\n\n    <div id="main-options">\n        <div id="bookmark" class="mp-option">\n            <div class="ibookmark mp-option-align"></div>\n            <div class="mp-option-text">\n                Bookmark\n            </div>\n        </div>\n        <div id="screenshot" class="mp-option">\n            <div class="iscreenshot mp-option-align"></div>\n            <div class="mp-option-text">\n                Screenshot\n            </div>\n            <img src="../../assets/icons/downarrow.png" class="mp-option-more"/>\n        </div>\n        <div id="screenshot-overlay"></div>\n        <div id="screenshot-options-wrap">\n            <div id="part-page" class="screenshot-options transition-all">\n                Part of the page\n            </div>\n            <div id="focused-page" class="screenshot-options transition-all">\n                Focused Area\n            </div>\n            <div id="full-page" class="screenshot-options transition-all">\n                Full page\n            </div>\n        </div>\n        <div id="reader-view" class="mp-option">\n            <div class="ireader-view mp-option-align"></div>\n            <div class="mp-option-text">\n                Reader View\n            </div>\n        </div>\n    </div>\n\n    <div id="mp-write-notes">\n        <div id="mp-placeholder">Write notes...</div>\n    </div>\n\n    <div id="mp-save-image">\n        <div class="iadd-photo mp-align"></div>\n        <div id="add-photo">\n            Add Photo\n        </div>\n        <div id="mp-drag-drop">\n            or Drag & drop image\n        </div>\n    </div>\n\n    <div id="view-all-wrap">\n        <div id="view-all">\n            View All Notes\n        </div>\n        <div class="iview-all align">\n        </div>\n    </div>\n\n    <div id="toast-message" class="hide">\n    </div>\n\n    </div>';var y=function(e){!function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&g(e,n)}(k,e);var n,t,u,l,h,m,y,x,S,E=(n=k,t=v(),function(){var e,r=b(n);if(t){var o=b(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return f(this,e)});function k(){var e;return function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,k),(e=E.call(this)).eventListeners=[],e}return u=k,(l=[{key:"connectedCallback",value:function(){var e=this;this.appendChild(w.content.cloneNode(!0)),this.processAttributes(),r.a.addListener("MainPage",this.querySelector("#mp-write-notes"),"click",this.showTextEditor.bind(this)),r.a.addListener("MainPage",this.querySelector("#nb-settings"),"click",this.toggleSettings.bind(this)),r.a.addListener("MainPage",this.querySelector("#nb-announcement"),"click",this.showAnnouncement.bind(this)),document.addEventListener("closeEditor",(function(){e.hideTextEditor(),e.hideBookmarkEditor()})),r.a.addListener("MainPage",this.querySelector("#close-app"),"click",this.closeApp.bind(this)),r.a.addListener("MainPage",this.querySelector("#reader-view"),"click",this.showReaderView.bind(this)),r.a.addListener("MainPage",this.querySelector("#view-all-wrap"),"click",this.viewAllNotes.bind(this)),r.a.addListener("MainPage",this.querySelector("#mp-save-image"),"click",this.showImageEditor.bind(this)),r.a.addListener("MainPage",this.querySelector("#bookmark"),"click",this.showBookmarkEditor.bind(this)),r.a.addListener("MainPage",this.querySelector("#screenshot"),"click",this.loadImageEditorWithScreenshot.bind(this)),r.a.addListener("MainPage",this.querySelector(".mp-option-more"),"click",this.showScreenshotOptions.bind(this)),r.a.addListener("MainPage",this.querySelector("#screenshot-overlay"),"click",this.hideScreenshotOptions.bind(this)),r.a.addListener("MainPage",this.querySelector("#part-page"),"click",this.partPageScreenshot.bind(this)),r.a.addListener("MainPage",this.querySelector("#focused-page"),"click",this.focusedPageScreenshot.bind(this)),r.a.addListener("MainPage",this.querySelector("#full-page"),"click",this.fullPageScreenshot.bind(this)),r.a.addListener("MainPage",this.querySelector("#analyticsMainPopup"),"click",this.toggleUsageReport.bind(this)),r.a.addListener("MainPage",this.querySelector("#analytics-close"),"click",this.closeAnalyticsPopup.bind(this)),r.a.addListener("MainPage",this.querySelector("#main-page-wrap"),"click",(function(n){if(n.target.id&&-1===n.target.id.toLowerCase().indexOf("analytics")){var t=e.querySelector("#analytics-consent");t&&(t.style.display="none")}})),Object(o.r)("../../dist/image-card.bundle.js"),Object(o.r)("../../dist/text-note-editor.bundle.js"),Object(o.r)("../../dist/bookmark-card.bundle.js"),Object(o.r)("../../dist/settings-page.bundle.js"),setTimeout((function(){a.f.sendMessage({action:s.a.FETCH_ANNOUNCEMENT},(function(n){if(n){e.announcements=n.announcements||[];var t=document.querySelector("announcement-page");t&&t.setAttribute("announcements",JSON.stringify(e.announcements));for(var r=0;r<e.announcements.length;r++)e.announcements[r].is_read||(e.querySelector("#red-dot").style.display="block")}}))}),10),r.a.addListener("MainPage",window,"message",this.eventerCallback.bind(this)),a.f.onMessage.addListener((function(n,t,r){switch(n.action){case s.a.SHOW_TOAST:var o=e.querySelector("#toast-message");o&&(o.innerText=n.message,o.classList.add("show"));break;case s.a.HIDE_TOAST:var i=e.querySelector("#toast-message");if(i){if(i.innerText=n.message+". ",n.notecard_id){a.f.sendMessage({action:s.a.GET_NB_DOMAIN},(function(e){c.href="".concat(e,"/app/index.html#/all-notes/").concat(n.notecard_id)}));var c=document.createElement("a");c.innerText="View it.",c.id="view-it",c.target="_blank",i.appendChild(c)}i.classList.add("show"),setTimeout((function(){i.classList.remove("show")}),4e3)}}})),a.f.sendMessage({action:s.a.GET_NB_DOMAIN},(function(n){e.nbDomain=n})),this.displayAnalyticsPopup()}},{key:"disconnectedCallback",value:function(){r.a.clearAllListeners("MainPage")}},{key:"partPageScreenshot",value:function(e){e&&e.stopPropagation(),this.hideScreenshotOptions(),a.f.sendMessage({action:s.a.PART_PAGE_SCREENSHOT}),parent.postMessage({action:"hideClipper"},"*"),a.f.sendMessage({action:s.a.SEND_ANALYTICS,data:{category:"MAIN_PAGE",action:"PART_PAGE_SCREENSHOT"}})}},{key:"focusedPageScreenshot",value:function(e){e&&e.stopPropagation(),this.hideScreenshotOptions(),a.f.sendMessage({action:s.a.FOCUSED_PAGE_SCREENSHOT}),parent.postMessage({action:"hideClipper"},"*"),a.f.sendMessage({action:s.a.SEND_ANALYTICS,data:{category:"MAIN_PAGE",action:"FOCUSED_PAGE_SCREENSHOT"}})}},{key:"toggleUsageReport",value:(S=p(regeneratorRuntime.mark((function e(){var n,t,r,a,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.querySelector("#analyticsMainPopup")){e.next=3;break}return e.abrupt("return");case 3:if(!n.classList.contains("enable")){e.next=13;break}return n.classList.remove("enable"),n.classList.add("disable"),e.next=8,Object(i.c)("userprofile");case 8:t=e.sent,r={},t&&(r=t.userprofile)&&Object(o.z)(!1,r.zuid),e.next=20;break;case 13:return n.classList.remove("disable"),n.classList.add("enable"),e.next=17,Object(i.c)("userprofile");case 17:a=e.sent,s={},a&&(s=a.userprofile)&&Object(o.z)(!0,s.zuid);case 20:case"end":return e.stop()}}),e,this)}))),function(){return S.apply(this,arguments)})},{key:"closeAnalyticsPopup",value:(x=p(regeneratorRuntime.mark((function e(){var n,t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=this.querySelector("#analytics-consent"))&&(n.style.display="none"),e.next=4,Object(i.c)("userprofile");case 4:t=e.sent,r={},t&&(r=t.userprofile)&&Object(o.z)(!1,r.zuid);case 7:case"end":return e.stop()}}),e,this)}))),function(){return x.apply(this,arguments)})},{key:"fullPageScreenshot",value:function(e){e&&e.stopPropagation(),this.hideScreenshotOptions(),a.f.sendMessage({action:s.a.FULL_PAGE_SCREENSHOT,step:"intialScrollPos"}),parent.postMessage({action:"hideClipper"},"*"),a.f.sendMessage({action:s.a.SEND_ANALYTICS,data:{category:"MAIN_PAGE",action:"FULL_PAGE_SCREENSHOT"}})}},{key:"showScreenshotOptions",value:function(e){e&&e.stopPropagation();var n=this.querySelector("#screenshot-options-wrap");if(n){n.style.display="block";var t=this.querySelector("#screenshot-overlay");t&&(t.style.display="block")}}},{key:"hideScreenshotOptions",value:function(e){e&&e.stopPropagation();var n=this.querySelector("#screenshot-options-wrap");if(n){n.style.display="none";var t=this.querySelector("#screenshot-overlay");t&&(t.style.display="none")}}},{key:"eventerCallback",value:function(e){var n=this,t=e.data;if(t)switch(t.action){case"webImageDrop":if(parent.postMessage({action:"showClipper"},"*"),!t.blob&&!t.base64)return;if(document.querySelector("text-note-editor"))return;if(document.querySelector("image-card"))return;if(t.base64)return void this.showImageEditor({initial_image_base64:t.base64,dont_load_annotator:!0});if(!t.blob)return;Object(o.t)([t.blob]).then((function(e){for(var t=0;t<e.length;t++)n.showImageEditor({initial_image_base64:e[0]})}));break;case"webTextDrop":if(!t.text)return;if(document.querySelector("text-note-editor"))return;this.showTextEditor({intial_text:t.text})}}},{key:"loadImageEditorWithScreenshot",value:function(){this.showImageEditor({initial_screenshot:!0}),this.hideScreenshotOptions(),a.f.sendMessage({action:s.a.SEND_ANALYTICS,data:{category:"MAIN_PAGE",action:"VISIBLE_AREA_SCREENSHOT"}})}},{key:"showAnnouncement",value:function(){var e=this;Object(o.r)("../../dist/announcement-page.bundle.js").then((function(){window.dispatchEvent(new CustomEvent("addComponent",{detail:{componentName:"announcement-page",attributes:{announcements:JSON.stringify(e.announcements)},parentElement:document.body}}))}))}},{key:"showReaderView",value:function(){parent.postMessage({action:"openReaderView",mode:"SIGNED_IN"},"*")}},{key:"closeApp",value:function(){parent.postMessage({action:"closeApp"},"*")}},{key:"showTextEditor",value:function(e){Object(o.r)("../../dist/text-note-editor.bundle.js").then((function(){window.dispatchEvent(new CustomEvent("addComponent",{detail:{componentName:"text-note-editor",attributes:e,parentElement:document.body}}))}))}},{key:"hideTextEditor",value:function(){window.dispatchEvent(new CustomEvent("removeComponentByName",{detail:{componentName:"text-note-editor"}}))}},{key:"hideBookmarkEditor",value:function(){window.dispatchEvent(new CustomEvent("removeComponentByName",{detail:{componentName:"bookmark-card"}}))}},{key:"showImageEditor",value:function(e){Object(o.r)("../../dist/image-card.bundle.js").then((function(){window.dispatchEvent(new CustomEvent("addComponent",{detail:{componentName:"image-card",attributes:e,parentElement:document.body}}))}))}},{key:"viewAllNotes",value:(y=p(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n="https://notebook.zoho.com/app/index.html#/all-notes",this.nbDomain&&(n=this.nbDomain+"/app/index.html#/all-notes"),window.open(n,"_blank");case 3:case"end":return e.stop()}}),e,this)}))),function(){return y.apply(this,arguments)})},{key:"showBookmarkEditor",value:function(){Object(o.r)("../../dist/bookmark-card.bundle.js").then((function(){window.dispatchEvent(new CustomEvent("addComponent",{detail:{componentName:"bookmark-card",parentElement:document.body}}))}))}},{key:"toggleSettings",value:function(){var e=this;Object(o.r)("../../dist/settings-page.bundle.js").then((function(){window.dispatchEvent(new CustomEvent("addComponent",{detail:{componentName:"settings-page",parentElement:e.querySelector("#onboard-header")}}))}));var n=this.querySelector("#nb-settings");n&&(n.classList.contains("highlight")?n.classList.remove("highlight"):n.classList.add("highlight"));var t=this.querySelector("#analytics-consent");t&&(t.style.display="none")}},{key:"processAttributes",value:function(){var e=this.getAttribute("context-action");if(e)switch(e){case"contextLinkCard":this.showBookmarkEditor();break;case"contextReaderView":this.showReaderView();break;case"contextScreenshot":this.showImageEditor({initial_screenshot:!0});break;case"contextTextSelection":var n=this.getAttribute("context-data");n&&(n=JSON.parse(n)),n.selectionText=Object(o.v)(n.selectionText),n.selectionText=Object(o.b)(n.selectionText),n.selectionText=Object(c.a)(n.selectionText),this.showTextEditor({intial_text:n.selectionText})}}},{key:"displayAnalyticsPopup",value:(m=p(regeneratorRuntime.mark((function e(){var n,t,r,a,s=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(i.c)("userprofile");case 2:if(n=e.sent,t={},!n||!(t=n.userprofile)){e.next=11;break}return e.next=7,Object(o.a)(t.zuid);case 7:e.sent?(r=this.querySelector("#analytics-consent"))&&(r.style.display="block"):(a=this.querySelector("#analytics-consent"))&&(a.style.display="none"),e.next=12;break;case 11:setTimeout((function(){s.displayAnalyticsPopup()}),2e3);case 12:case"end":return e.stop()}}),e,this)}))),function(){return m.apply(this,arguments)})}])&&d(u.prototype,l),h&&d(u,h),k}(h(HTMLElement));Object(o.u)("main-page",y)}]);